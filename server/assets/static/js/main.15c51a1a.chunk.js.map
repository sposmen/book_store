{"version":3,"sources":["components/auth/signUpLogo.svg","components/helpers/downloadLogo.svg","components/services/JwtRequest.js","components/books/NewBook.js","components/users/UserList.js","components/orders/OrdersTable.js","components/users/UserOrders.js","components/helpers/Clock.js","components/helpers/AlertDismissible.js","components/auth/SignIn.js","components/auth/SignUp.js","components/books/MyBooksList.js","components/helpers/Menus.js","App.js","index.js","components/services/AuthService.js","components/books/BooksList.js","components/services/HardJwtRequest.js"],"names":["module","exports","JwtRequest","opts","cb","request","_","merge","method","io","socket","headers","authorization","jwt","resData","jwres","statusCode","token","localStorage","setItem","undefined","removeItem","getItem","NewBook","props","changeHandler","event","changed","state","newBook","target","name","value","setState","newUser","handleSubmit","preventDefault","stopPropagation","data","FormData","file","document","getElementById","append","files","Object","keys","forEach","key","HardJwtRequest","post","url","then","response","console","log","hideNew","catch","err","body","isObject","error","isString","Body","this","variant","Group","controlId","Label","Control","type","placeholder","onChange","required","step","accept","show","showNew","onHide","onSubmit","Header","closeButton","Title","newBookForm","Footer","onClick","React","Component","UsersList","userRole","me","accountType","toggleActive","user","patch","id","active","users","showOrders","hideOrders","pageSize","parseInt","params","history","createBrowserHistory","page","pageCount","toPage","param","URLSearchParams","window","location","search","get","skip","usersRes","usersCount","Math","ceil","setImmediate","getUsers","push","pathname","toString","base","max","min","items","number","Item","md","striped","size","map","i","email","orders","length","pagination","OrdersTable","Table","order","books","UserOrders","ordersRes","Modal","ordersTable","Button","Clock","date","Date","timerID","setInterval","tick","clearInterval","toLocaleTimeString","AlertDismissible","children","parentValue","Alert","onClose","setShow","dismissible","SignIn","password","bind","showError","signIn","className","Row","Col","span","Form","minLength","SignUp","success","signUp","message","src","signUpLogo","alt","MyBooksList","book","ButtonToolbar","addToCart","BooksList","defaultMenu","routes","switch","menuByUser","admin","Menus","role","Home","About","App","setUser","userData","roleMenu","userMenu","idx","path","route","Nav","Link","as","to","Navbar","collapseOnSelect","expand","bg","Container","Brand","Toggle","aria-controls","Collapse","routeLinks","logout","Text","pages","navBar","pageSwitch","sailsIOClient","socketIOClient","sails","reconnection","hostname","origin","ReactDOM","render","authHooks","authResponse","hook","gettingMe","indexOf","flush","getBooks","booksUrl","booksRes","booksCount","download","filename","downloadLogo","style","width","height","showNewButton","author","price","keywords","join","actionButtons","responseType","URL","createObjectURL","Blob","link","createElement","href","setAttribute","appendChild","click","setTimeout","removeChild","axios"],"mappings":"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","file":"static/js/main.15c51a1a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/signUpLogo.94717a01.svg\";","module.exports = __webpack_public_path__ + \"static/media/downloadLogo.eb839bb2.svg\";","import _ from 'lodash';\n\nclass JwtRequest {\n  static get(opts, cb) {\n    JwtRequest.request(_.merge({}, opts, {method: 'GET'}), cb);\n  }\n\n  static post(opts, cb) {\n    JwtRequest.request(_.merge({}, opts, {method: 'POST'}), cb);\n  }\n\n  static patch(opts, cb) {\n    JwtRequest.request(_.merge({}, opts, {method: 'PATCH'}), cb);\n  }\n\n  static request(opts, cb) {\n    // eslint-disable-next-line no-undef\n    io.socket.request(_.merge({}, opts, {\n      headers: {authorization: `Bearer ${JwtRequest.jwt}`}\n    }), (resData, jwres) => {\n      if (jwres.statusCode === 200 && resData.token) {\n        localStorage.setItem('jwt', JwtRequest.jwt = resData.token);\n      }\n      cb(resData, jwres);\n    });\n  }\n\n  static flush() {\n    JwtRequest.jwt = undefined;\n    localStorage.removeItem('jwt');\n  }\n}\n\nJwtRequest.jwt = localStorage.getItem('jwt');\n\nexport default JwtRequest;\n","import React from 'react';\nimport {Alert, Button, Form, Modal} from 'react-bootstrap';\nimport HardJwtRequest from '../services/HardJwtRequest';\nimport _ from 'lodash';\n\nclass NewBook extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.hideNew = props.hideNew;\n    this.state = {\n      newBook: {},\n      error: null\n    };\n  }\n\n  changeHandler = (event) => {\n    let changed = this.state.newBook;\n    changed[event.target.name] = event.target.value;\n    this.setState({newUser: changed});\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    const data = new FormData();\n    let file = document.getElementById('formBasicFile');\n    data.append('bookFile', file.files[0]);\n    Object.keys(this.state.newBook).forEach((key) => {\n      data.append(key, this.state.newBook[key]);\n    });\n    HardJwtRequest.post({\n      url: '/api/books',\n      data: data,\n      headers: {'content-type': 'multipart/form-data'}\n    }).then((response) => {\n      console.log(response);\n      this.hideNew();\n    }).catch((err, body) => {\n      debugger\n      if (_.isObject(err)) {\n        this.setState({error: err.response.data});\n      }\n      if (_.isString(err)) this.setState({error: err});\n    });\n  };\n\n  newBookForm() {\n    return (\n      <Modal.Body>\n        {this.state.error ? <Alert variant='danger'>{this.state.error}</Alert> : ''}\n        <Form.Group controlId=\"formBasicName\">\n          <Form.Label>Book Name</Form.Label>\n          <Form.Control\n            type=\"text\"\n            name=\"name\"\n            placeholder=\"Enter Book Name\"\n            onChange={this.changeHandler}\n            required/>\n        </Form.Group>\n        <Form.Group controlId=\"formBasicAuthor\">\n          <Form.Label>Author Name</Form.Label>\n          <Form.Control\n            type=\"text\"\n            name=\"author\"\n            placeholder=\"Enter Author Name\"\n            onChange={this.changeHandler}\n            required/>\n        </Form.Group>\n        <Form.Group controlId=\"formBasicPrice\">\n          <Form.Label>Price</Form.Label>\n          <Form.Control\n            type=\"number\"\n            step=\"0.01\"\n            name=\"price\"\n            placeholder=\"Enter Book Price\"\n            onChange={this.changeHandler}\n            required/>\n        </Form.Group>\n        <Form.Group controlId=\"formBasicFile\">\n          <Form.Label>Book File</Form.Label>\n          <Form.Control\n            type=\"file\"\n            name=\"bookFile\"\n            required\n            accept=\"text/plain\"\n          />\n        </Form.Group>\n      </Modal.Body>\n    );\n  }\n\n  render() {\n    return (\n      <Modal show={this.props.showNew} onHide={this.hideNew}>\n        <Form onSubmit={this.handleSubmit}>\n          <Modal.Header closeButton>\n            <Modal.Title>New book</Modal.Title>\n          </Modal.Header>\n          {this.newBookForm()}\n          <Modal.Footer>\n            <Button variant=\"secondary\" onClick={this.hideNew}>\n              Close\n            </Button>\n            <Button type=\"submit\" variant=\"primary\" onClick={this.handleSubmit}>\n              Save Book\n            </Button>\n          </Modal.Footer>\n        </Form>\n      </Modal>\n    );\n  }\n}\n\nexport default NewBook;\n","import React from 'react';\nimport JwtRequest from '../services/JwtRequest';\nimport {Button, Col, Row, Table, Pagination, ButtonToolbar} from 'react-bootstrap';\nimport {createBrowserHistory} from 'history';\nimport {me} from '../services/AuthService';\nimport UserOrders from './UserOrders';\n\nclass UsersList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.pageSize = parseInt(this.params('pageSize')) || 5;\n    this.history = createBrowserHistory();\n    let page = parseInt(this.params('page')) || 1;\n    this.state = {\n      showOrders: false,\n      page: page,\n      pageCount: 1,\n      users: {},\n      userRole: null\n    };\n  }\n\n  userRole = (me) => {\n    this.setState({'userRole': me ? me.accountType : null});\n  };\n\n  componentDidMount() {\n    me(this.userRole);\n    this.toPage(this.state.page);\n  }\n\n  params(param = null) {\n    let params = new URLSearchParams(window.location.search);\n    return param ? params.get(param) : params;\n  }\n\n  getUsers() {\n    if (this.state.page) {\n      let skip = (this.state.page - 1) * this.pageSize;\n      let url = `/api/users?skip=${skip}&limit=${this.pageSize}`;\n      // Get the Users\n      JwtRequest.get({url: url}, (usersRes, jwres) => {\n        if (jwres.statusCode === 200 && usersRes) {\n          let users = {};\n          usersRes.forEach((user) => users[user.id] = user);\n          this.setState({users: users});\n        }\n      });\n\n      // Get the count\n      JwtRequest.get({url: '/api/users/count'}, (usersCount, jwres) => {\n        if (jwres.statusCode === 200 && usersCount) {\n          let pageCount = Math.ceil(parseInt(usersCount) / this.pageSize);\n          if (this.state.page > pageCount) {\n            this.toPage(pageCount);\n          } else {\n            this.setState({pageCount: pageCount});\n          }\n\n        }\n      });\n    }\n  }\n\n  toggleActive = (user) => {\n    return () => {\n      JwtRequest.patch({url: `/api/users/${user.id}`, data: {active: !user.active}}, (user, jwres) => {\n        if (jwres.statusCode === 200 && user) {\n          let users = {...this.state.users};\n          users[user.id] = user;\n          this.setState({users: users});\n        }\n      });\n    };\n  };\n\n  showOrders = (user) => {\n    return () => {\n      this.setState({showOrders: user});\n    };\n\n  };\n\n  hideOrders = () => {\n    this.setState({showOrders: false});\n  };\n\n  toPage(page) {\n    this.setState({page: page});\n    setImmediate(() => this.getUsers());\n    this.history.push({\n      pathname: '/users',\n      search: '?' + new URLSearchParams({page: page}).toString()\n    });\n  }\n\n  pagination() {\n    let base = Math.max(this.state.page - 2, 1);\n    let max = Math.min(base + 5, this.state.pageCount);\n    let items = [];\n    for (let number = base; number <= max; number++) {\n      items.push(\n        <Pagination.Item onClick={() => this.toPage(number)} key={number} active={number === this.state.page}>\n          {number}\n        </Pagination.Item>,\n      );\n    }\n    return (\n      <Pagination>{items}</Pagination>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        <UserOrders showOrders={this.state.showOrders} hideOrders={this.hideOrders}/>\n        <Row>\n          <Col md=\"2\">\n            <h3>Users</h3>\n          </Col>\n        </Row>\n\n        <Table striped size=\"sm\">\n          <thead>\n          <tr>\n            <th>Name</th>\n            <th>Email</th>\n            <th>Orders</th>\n            <th>Actions</th>\n          </tr>\n          </thead>\n          <tbody>\n\n          {Object.keys(this.state.users).map((id, i) => {\n            let user = this.state.users[id];\n            return (\n              <tr key={id}>\n                <td>{user.name}</td>\n                <td>{user.email}</td>\n                <td>{user.orders.length}</td>\n                <td>\n                  <ButtonToolbar>\n                    <Button variant={user.active ? 'success' : 'secondary'} onClick={this.toggleActive(user)} size=\"sm\">\n                      {user.active ? 'Active' : 'Inactive'}\n                    </Button>&nbsp;\n                    <Button variant=\"primary\" onClick={this.showOrders(user)} size=\"sm\">Orders</Button>\n                  </ButtonToolbar>\n                </td>\n              </tr>\n            );\n          })}\n          </tbody>\n        </Table>\n        <Row><Col>{this.pagination()}</Col></Row>\n      </div>\n    );\n  }\n}\n\nexport default UsersList;\n","import {Table} from 'react-bootstrap';\nimport React from 'react';\n\n/**\n * @return {string}\n */\nfunction OrdersTable(props) {\n  return !props.orders ? '' : (\n    <Table striped size=\"sm\">\n      <thead>\n      <tr>\n        <th>Order ID</th>\n        <th>Date</th>\n        <th>User Email</th>\n        <th>Books</th>\n      </tr>\n      </thead>\n      <tbody>\n      {Object.keys(props.orders).map((id) => {\n        let order = props.orders[id];\n        return (\n          <tr key={id}>\n            <td>{id}</td>\n            <td>{order.name}</td>\n            <td>{order.email}</td>\n            <td>{order.books}</td>\n          </tr>\n        );\n      })}\n      </tbody>\n    </Table>\n  )\n}\n\nexport default OrdersTable;\n","import React from 'react';\nimport {Button, Modal} from 'react-bootstrap';\nimport OrdersTable from '../orders/OrdersTable';\nimport JwtRequest from '../services/JwtRequest';\n\nclass UserOrders extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.hideOrders = props.hideOrders;\n    this.state = {\n      orders: {},\n      error: null\n    };\n  }\n\n  componentDidMount() {\n    let url = `/api/users/${this.props.showOrders.id}/orders?sort=createdAt%20DESC`;\n    // Get the Users\n    JwtRequest.get({url: url}, (ordersRes, jwres) => {\n      if (jwres.statusCode === 200 && ordersRes) {\n        let orders = {};\n        ordersRes.forEach((order) => orders[order.id] = order);\n        this.setState({orders: orders});\n      }\n    });\n  }\n\n  ordersTable() {\n    return (\n      <Modal.Body>\n        <OrdersTable orders={this.props.orders}/>\n      </Modal.Body>\n    );\n  }\n\n  render() {\n    return (\n      <Modal size=\"lg\" show={!!this.props.showOrders} onHide={this.hideOrders}>\n        <Modal.Header closeButton>\n          <Modal.Title>{this.props.showOrders.name} - Orders</Modal.Title>\n        </Modal.Header>\n        {this.ordersTable()}\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={this.hideOrders}>\n            Close\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n}\n\nexport default UserOrders;\n","import React from 'react';\n\nclass Clock extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {date: new Date()};\n  }\n\n  componentDidMount() {\n    this.timerID = setInterval(\n      () => this.tick(),\n      1000\n    );\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timerID);\n  }\n\n  tick() {\n    this.setState({\n      date: new Date()\n    });\n  }\n\n  render() {\n    return (\n      <div>{this.state.date.toLocaleTimeString()}</div>\n    );\n  }\n}\n\nexport default Clock;\n","import React from 'react';\nimport {Alert} from 'react-bootstrap';\n\n\nclass AlertDismissible extends React.Component {\n  constructor(props) {\n    super(props);\n    this.children = props.children;\n    this.variant = props.variant || 'danger';\n    this.state = {\n      show: props.parentValue ? props.parentValue() : true\n    };\n  }\n\n  setShow(value) {\n    if (this.props.parentValue) {\n      this.props.parentValue(value);\n    }\n    return this.setState({show: this.props.parentValue ? this.props.parentValue() : value});\n  }\n\n  render() {\n    return this.state.show ? (<Alert variant={this.variant} onClose={() => this.setShow(false)} dismissible>\n      {this.children}\n    </Alert>) : '';\n  }\n}\n\nexport default AlertDismissible;\n","import React from 'react';\nimport {Form, Button, Row, Col} from 'react-bootstrap';\nimport {signIn} from '../services/AuthService';\nimport AlertDismissible from '../helpers/AlertDismissible';\n\nclass SignIn extends React.Component {\n  constructor(props) {\n    super(props);\n    this.children = props.children;\n    this.state = {\n      newUser: {\n        email: '',\n        password: ''\n      },\n      error: false\n    };\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.showError = this.showError.bind(this);\n  }\n\n  changeHandler = (event) => {\n    let changed = this.state.newUser;\n    changed[event.target.name] = event.target.value;\n    this.setState({newUser: changed});\n  };\n\n  handleSubmit(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    signIn(this.state.newUser, (resData, jwres) => {\n      if (jwres.statusCode === 400) {\n        return this.showError(resData);\n      }\n    });\n  };\n\n  showError(value) {\n    return value === undefined ? this.state.error : this.setState({error: value});\n  }\n\n  render() {\n    return (\n      <div className=\"UserSignUp\">\n        <Row>\n          <Col md={{span: 8}}>\n            <div className=\"UserSignIn\">\n              {\n                this.state.error ? (\n                  <AlertDismissible parentValue={this.showError}>{this.state.error}</AlertDismissible>\n                ) : ''\n              }\n              <Form onSubmit={this.handleSubmit}>\n                <Form.Group controlId=\"formBasicEmail\">\n                  <Form.Label>Email address</Form.Label>\n                  <Form.Control\n                    name=\"email\"\n                    type=\"email\"\n                    placeholder=\"Enter Email\"\n                    onChange={this.changeHandler}\n                    required/>\n                </Form.Group>\n                <Form.Group controlId=\"formBasicPassword\">\n                  <Form.Label>Password</Form.Label>\n                  <Form.Control\n                    name=\"password\"\n                    type=\"password\"\n                    placeholder=\"Password\"\n                    onChange={this.changeHandler}\n                    required\n                    minLength=\"6\"/>\n                </Form.Group>\n                <Button variant=\"primary\" type=\"submit\">Sign In</Button>\n              </Form>\n            </div>\n          </Col>\n        </Row>\n      </div>\n    );\n  }\n}\n\nexport default SignIn;\n","import React from 'react';\nimport {Form, Button, Row, Col} from 'react-bootstrap';\nimport signUpLogo from './signUpLogo.svg';\nimport AlertDismissible from '../helpers/AlertDismissible';\nimport {signUp} from '../services/AuthService';\n\nclass SignUp extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      newUser: {\n        name: '',\n        email: '',\n        password: ''\n      },\n      error: false,\n      success: false\n    };\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.showError = this.showError.bind(this);\n  }\n\n  changeHandler = (event) => {\n    let changed = this.state.newUser;\n    changed[event.target.name] = event.target.value;\n    this.setState({newUser: changed});\n  };\n\n  handleSubmit(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    signUp(this.state.newUser, (resData, jwres) => {\n      if (jwres.statusCode === 400) {\n        return this.showError(resData.message);\n      }\n    });\n  };\n\n  showError(value) {\n    return value === undefined ? this.state.error : this.setState({error: value});\n  }\n\n  render() {\n    return (\n      <div className=\"UserSignUp\">\n        <Row>\n          <Col md={{span: 8}}>\n            {\n              this.state.error ? (\n                <AlertDismissible parentValue={this.showError}>{this.state.error}</AlertDismissible>\n              ) : ''\n            }\n            <Form onSubmit={this.handleSubmit}>\n              <Form.Group controlId=\"formBasicFirstName\">\n                <Form.Label>First Name</Form.Label>\n                <Form.Control\n                  type=\"text\"\n                  name=\"name\"\n                  placeholder=\"Enter First Name\"\n                  onChange={this.changeHandler}\n                  required/>\n              </Form.Group>\n              <Form.Group controlId=\"formBasicEmail\">\n                <Form.Label>Email address</Form.Label>\n                <Form.Control\n                  name=\"email\"\n                  type=\"email\"\n                  placeholder=\"Enter Email\"\n                  onChange={this.changeHandler}\n                  required/>\n              </Form.Group>\n              <Form.Group controlId=\"formBasicPassword\">\n                <Form.Label>Password</Form.Label>\n                <Form.Control\n                  name=\"password\"\n                  type=\"password\"\n                  placeholder=\"Password\"\n                  onChange={this.changeHandler}\n                  required\n                  minLength=\"6\"/>\n              </Form.Group>\n              <Button variant=\"primary\" type=\"submit\">Sign up</Button>\n            </Form>\n          </Col>\n          <Col>\n            <img src={signUpLogo} className=\"SignUp-logo\" alt=\"logo\"/>\n          </Col>\n        </Row>\n      </div>\n    );\n  }\n}\n\nexport default SignUp;\n","import BooksList from './BooksList';\nimport {Button, ButtonToolbar} from 'react-bootstrap';\nimport React from 'react';\n\nclass MyBooksList extends BooksList{\n  booksUrl(){\n    let skip = (this.state.page - 1) * this.pageSize;\n    return `/api/books?skip=${skip}&limit=${this.pageSize}&where={\"active\":true}`;\n  }\n\n  addToCart(book){\n    return ()=>{\n\n    }\n  }\n\n  actionButtons(book) {\n    return (\n      <ButtonToolbar>\n        <Button variant=\"primary\" onClick={this.addToCart(book)}                size=\"sm\">\n          Add to Cart\n        </Button>\n      </ButtonToolbar>\n    );\n  }\n\n  // Don't show the new Button\n  showNewButton() {\n    return '';\n  }\n}\n\nexport default MyBooksList;\n","import React from 'react';\nimport SignIn from '../auth/SignIn';\nimport SignUp from '../auth/SignUp';\nimport BooksList from '../books/BooksList';\nimport UsersList from '../users/UserList';\nimport MyBooksList from '../books/MyBooksList';\n\nconst defaultMenu = {\n  routes: [\n    ['/sign_in', 'Sign In'],\n    ['/sign_up', 'Sign Up'],\n  ],\n  switch: [\n    ['/sign_up', <SignUp/>],\n    ['/sign_in', <SignIn/>]\n  ]\n};\n\nconst menuByUser = {\n  user: {\n    routes: [\n      ['/books', 'Books'],\n      ['/orders', 'My orders'],\n      ['/cart', 'My cart'],\n    ],\n    switch: [\n      ['/books', <MyBooksList/>],\n    ]\n  },\n  admin: {\n    routes: [\n      ['/books', 'Books'],\n      ['/users', 'Users'],\n      ['/orders', 'Orders'],\n    ],\n    switch: [\n      ['/books', <BooksList/>],\n      ['/users', <UsersList/>],\n    ]\n  }\n};\n\nclass Menus {\n  static roleMenu(role) {\n    return role ? menuByUser[role] : defaultMenu;\n  }\n}\n\nexport default Menus;\n","import React from 'react';\nimport {Col, Container, Nav, Navbar, Row} from 'react-bootstrap';\nimport {BrowserRouter as Router, Link, Switch, Route} from 'react-router-dom';\nimport Clock from './components/helpers/Clock';\nimport {logout, me} from './components/services/AuthService';\nimport Menus from './components/helpers/Menus';\n\nfunction Home() {\n  return <h2>Welcome to the Book Store</h2>;\n}\n\nfunction About() {\n  return <h2>About</h2>;\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      user: null\n    };\n\n    this.setUser = this.setUser.bind(this);\n    me(this.setUser);\n  }\n\n  setUser(userData) {\n    this.setState({user: userData});\n  }\n\n  userRole() {\n    return this.state.user && this.state.user.accountType;\n  }\n\n  userMenu() {\n    return Menus.roleMenu(this.userRole());\n  }\n\n  pages() {\n    return this.userMenu().switch.map((page, idx) => <Route path={page[0]} key={page[0]}>{page[1]}</Route>);\n  }\n\n  routeLinks() {\n    return this.userMenu().routes.map((route) => <Nav.Link key={route[0]} as={Link} to={route[0]}>{route[1]}</Nav.Link>);\n  }\n\n  navBar() {\n    return (\n      <Navbar collapseOnSelect expand=\"lg\" bg=\"primary\" variant=\"dark\">\n        <Container>\n          <Navbar.Brand as={Link} to=\"/\">Book Store</Navbar.Brand>\n          <Navbar.Toggle aria-controls=\"responsive-navbar-nav\"/>\n          <Navbar.Collapse id=\"responsive-navbar-nav\">\n            <Nav className=\"mr-auto\">\n              {this.routeLinks()}\n            </Nav>\n\n            <Nav>\n              <Nav.Link as={Link} to=\"/about\">About</Nav.Link>\n              {this.userRole() ? <Nav.Link onClick={logout}>Logout</Nav.Link> : ''}\n              <Navbar.Text><Clock/></Navbar.Text>\n            </Nav>\n          </Navbar.Collapse>\n        </Container>\n      </Navbar>\n    );\n  }\n\n  pageSwitch() {\n    return (\n      <Switch>\n        {this.pages()}\n        <Route path=\"/about\">\n          <About/>\n        </Route>\n        <Route path=\"/\">\n          <Home/>\n        </Route>\n      </Switch>\n    );\n  }\n\n  render() {\n    return (\n      <Router>\n        {this.navBar()}\n        <Container className=\"main\">\n          <Row>\n            <Col>{this.pageSwitch()}</Col>\n          </Row>\n        </Container>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport socketIOClient from 'socket.io-client';\nimport sailsIOClient from 'sails.io.js';\n\nimport './index.scss';\n\nimport App from './App';\n\nlet io = sailsIOClient(socketIOClient);\nio.sails.reconnection = true;\nio.sails.url = window.location.hostname === 'localhost' ? `http://${window.location.hostname}:1337` : window.location.origin;\n// io.sails.url = window.location.origin;\nwindow.io = io;\n\nReactDOM.render(<App/>, document.getElementById('root'));\n","import JwtRequest from './JwtRequest';\n\nlet userData = null;\nlet authHooks = [];\n\nfunction authResponse(resData, jwres) {\n  if (jwres.statusCode === 200 && resData.user) {\n    userData = resData.user;\n  }\n  authHooks.forEach(hook => hook(userData));\n}\n\nlet gettingMe = false;\n\nexport const me = function me(cb = null) {\n  // Check if cb is not null and is not already in the hooks\n  if (cb && authHooks.indexOf(cb) < 0) {\n    authHooks.push(cb);\n  }\n  // If userData is already set, probably just a single call\n  if (userData && cb) {\n    return cb(userData);\n  }\n\n  // There is no request in course and the user data is not populated but the user is signed in.\n  if (!gettingMe && !userData && JwtRequest.jwt) {\n    gettingMe = true;\n    JwtRequest.get({url: '/api/jwt/me'}, (resData, jwres) => {\n      gettingMe = false;\n      authResponse(resData, jwres);\n    });\n  }\n};\n\nexport const logout = function logout(cb) {\n  userData = null;\n  JwtRequest.flush();\n  authHooks.forEach(hook => hook(userData));\n};\n\nexport const signUp = (data, cb) => {\n  // eslint-disable-next-line no-undef\n  JwtRequest.post({\n    url: '/api/jwt/signup',\n    data: data\n  }, (resData, jwres) => {\n    authResponse(resData, jwres);\n    cb(resData, jwres);\n  });\n};\n\nexport const signIn = (data, cb) => {\n  // eslint-disable-next-line no-undef\n  JwtRequest.post({\n    url: '/api/jwt/auth',\n    data: data\n  }, (resData, jwres) => {\n    authResponse(resData, jwres);\n    cb(resData, jwres);\n  });\n};\n","import React from 'react';\nimport JwtRequest from '../services/JwtRequest';\nimport {Button, Col, Row, Table, Pagination, ButtonToolbar} from 'react-bootstrap';\nimport downloadLogo from '../helpers/downloadLogo.svg';\nimport NewBook from './NewBook';\nimport HardJwtRequest from '../services/HardJwtRequest';\nimport {createBrowserHistory} from 'history';\nimport {me} from '../services/AuthService';\n\nclass BooksList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.pageSize = parseInt(this.params('pageSize')) || 5;\n    this.history = createBrowserHistory();\n    let page = parseInt(this.params('page')) || 1;\n    this.state = {\n      showNew: false,\n      page: page,\n      pageCount: 1,\n      books: {},\n      userRole: null\n    };\n  }\n\n  userRole = (me) => {\n    this.setState({'userRole': me ? me.accountType : null});\n  };\n\n  componentDidMount() {\n    me(this.userRole);\n    this.toPage(this.state.page);\n  }\n\n  params(param = null) {\n    let params = new URLSearchParams(window.location.search);\n    return param ? params.get(param) : params;\n  }\n\n  booksUrl() {\n    let skip = (this.state.page - 1) * this.pageSize;\n    return `/api/books?skip=${skip}&limit=${this.pageSize}`;\n  }\n\n  getBooks() {\n    if (this.state.page) {\n      let url = this.booksUrl();\n      // Get the Books\n      JwtRequest.get({url: url}, (booksRes, jwres) => {\n        if (jwres.statusCode === 200 && booksRes) {\n          let books = {};\n          booksRes.forEach((book) => books[book.id] = book);\n          this.setState({books: books});\n        }\n      });\n\n      // Get the count\n      JwtRequest.get({url: '/api/books/count'}, (booksCount, jwres) => {\n        if (jwres.statusCode === 200 && booksCount) {\n          let pageCount = Math.ceil(parseInt(booksCount) / this.pageSize);\n          if (this.state.page > pageCount) {\n            this.toPage(pageCount);\n          } else {\n            this.setState({pageCount: pageCount});\n          }\n\n        }\n      });\n    }\n  }\n\n  toggleActive = (book) => {\n    return () => {\n      JwtRequest.patch({url: `/api/books/${book.id}`, data: {active: !book.active}}, (book, jwres) => {\n        if (jwres.statusCode === 200 && book) {\n          let books = {...this.state.books};\n          books[book.id] = book;\n          this.setState({books: books});\n        }\n      });\n    };\n  };\n\n  showNew = () => {\n    this.setState({showNew: true});\n  };\n\n  hideNew = () => {\n    this.getBooks();\n    this.setState({showNew: false});\n  };\n\n  download(book) {\n    return () => {\n      HardJwtRequest.download({url: `/api/books/${book.id}/download`, filename: book.name});\n    };\n  }\n\n  toPage(page) {\n    this.setState({page: page});\n    setImmediate(() => this.getBooks());\n    this.history.push({\n      pathname: '/books',\n      search: '?' + new URLSearchParams({page: page}).toString()\n    });\n  }\n\n  pagination() {\n    let base = Math.max(this.state.page - 2, 1);\n    let max = Math.min(base + 5, this.state.pageCount);\n    let items = [];\n    for (let number = base; number <= max; number++) {\n      items.push(\n        <Pagination.Item onClick={() => this.toPage(number)} key={number} active={number === this.state.page}>\n          {number}\n        </Pagination.Item>,\n      );\n    }\n    return (\n      <Pagination>{items}</Pagination>\n    );\n  }\n\n  actionButtons(book) {\n    return (\n      <ButtonToolbar>\n        <Button variant=\"link\" onClick={this.download(book)}>\n          <img src={downloadLogo} style={{width: 20, height: 20}} className=\"Download-logo\" alt=\"logo\"/>\n        </Button>\n        <Button variant={book.active ? 'success' : 'secondary'} onClick={this.toggleActive(book)}\n                size=\"sm\">\n          {book.active ? 'Active' : 'Inactive'}\n        </Button>\n      </ButtonToolbar>\n    );\n  }\n\n  showNewButton() {\n    return (\n      <Col>\n        <Button variant=\"primary\" onClick={this.showNew}> New </Button>\n      </Col>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        <NewBook showNew={this.state.showNew} hideNew={this.hideNew}/>\n        <Row>\n          <Col md=\"2\">\n            <h3>Books</h3>\n          </Col>\n          {this.showNewButton()}\n        </Row>\n\n        <Table striped size=\"sm\">\n          <thead>\n          <tr>\n            <th>Name</th>\n            <th>Author</th>\n            <th>Price</th>\n            <th>Keywords</th>\n            <th>Actions</th>\n          </tr>\n          </thead>\n          <tbody>\n\n          {Object.keys(this.state.books).map((id, i) => {\n            let book = this.state.books[id];\n            return (\n              <tr key={id}>\n                <td>{book.name}</td>\n                <td>{book.author}</td>\n                <td>{book.price}</td>\n                <td>{book.keywords && book.keywords.join(', ')}</td>\n                <td>{this.actionButtons(book)}</td>\n              </tr>\n            );\n          })}\n          </tbody>\n        </Table>\n        <Row><Col>{this.pagination()}</Col></Row>\n      </div>\n    );\n  }\n}\n\nexport default BooksList;\n","import _ from 'lodash';\nimport axios from 'axios';\nimport JwtRequest from './JwtRequest';\n\n\nclass HardJwtRequest {\n  static get(opts, cb) {\n    return HardJwtRequest.request(_.merge({}, opts, {method: 'GET'}), cb);\n  }\n\n  static post(opts, cb) {\n    return HardJwtRequest.request(_.merge({}, opts, {method: 'POST'}), cb);\n  }\n\n  static patch(opts, cb) {\n    return HardJwtRequest.request(_.merge({}, opts, {method: 'PATCH'}), cb);\n  }\n\n  static download(opts) {\n    let filename;\n    if(opts.filename){\n      filename = opts.filename;\n      delete opts.filename\n    }\n    return HardJwtRequest.request(_.merge({}, opts, {method: 'GET', responseType: 'blob'}))\n    .then((response) => {\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', `${filename || 'book'}.txt`);\n      document.body.appendChild(link);\n      link.click();\n      setTimeout(() => document.body.removeChild(link), 1000);\n    });\n  }\n\n  static request(opts, cb) {\n    opts = _.merge(opts, {\n      headers: {authorization: `Bearer ${JwtRequest.jwt}`}\n    });\n\n    // eslint-disable-next-line no-undef\n    opts['url'] = `${io.sails.url}${opts['url']}`;\n    return axios.request(opts, (resData, jwres) => {\n      if (jwres.statusCode === 200 && resData.token) {\n        localStorage.setItem('jwt', JwtRequest.jwt = resData.token);\n      }\n      cb(resData, jwres);\n    });\n  }\n\n}\n\nexport default HardJwtRequest;\n"],"sourceRoot":""}