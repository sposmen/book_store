{"version":3,"sources":["components/auth/signUpLogo.svg","components/helpers/downloadLogo.svg","components/books/NewBook.js","components/users/UserList.js","components/users/UserOrders.js","components/helpers/Clock.js","components/services/AuthService.js","components/helpers/AlertDismissible.js","components/auth/SignIn.js","components/auth/SignUp.js","components/books/MyBooksList.js","components/orders/MyOrdersList.js","components/cart/Cart.js","components/helpers/Menus.js","App.js","index.js","components/books/BooksList.js","components/services/HardJwtRequest.js","components/orders/OrdersTable.js","components/orders/OrdersList.js","components/services/JwtRequest.js"],"names":["module","exports","NewBook","props","changeHandler","event","changed","state","newBook","target","name","value","setState","handleSubmit","preventDefault","stopPropagation","data","FormData","currentTarget","HardJwtRequest","post","url","headers","then","response","console","log","hideNew","catch","err","body","_","isObject","error","isString","Body","this","variant","Group","controlId","Label","Control","type","placeholder","onChange","required","step","accept","show","showNew","onHide","onSubmit","Header","closeButton","Title","newBookForm","Footer","onClick","React","Component","UsersList","toggleActive","user","JwtRequest","patch","id","active","jwres","statusCode","users","showOrders","hideOrders","pageSize","parseInt","params","history","createBrowserHistory","page","pageCount","toPage","param","URLSearchParams","window","location","search","get","skip","usersRes","forEach","usersCount","Math","ceil","setImmediate","getUsers","push","pathname","toString","base","max","min","items","number","Item","key","md","striped","size","Object","keys","map","i","email","orders","length","pagination","UserOrders","ordersRes","order","ordersTable","Clock","date","Date","timerID","setInterval","tick","clearInterval","toLocaleTimeString","userData","authHooks","authResponse","resData","hook","gettingMe","me","cb","indexOf","jwt","logout","flush","AlertDismissible","children","parentValue","Alert","onClose","setShow","dismissible","SignIn","newUser","password","bind","showError","undefined","className","Row","Col","span","Form","minLength","Button","SignUp","success","message","src","signUpLogo","alt","MyBooksList","book","bookId","cart","redirectTo","ButtonToolbar","addToCart","BooksList","MyOrdersList","OrdersList","Cart","placeOrder","books","total","getCart","reduce","acc","price","to","Table","disabled","defaultMenu","routes","switch","menuByUser","admin","Menus","role","Home","About","App","setUser","accountType","roleMenu","userRole","userMenu","idx","path","route","Nav","Link","as","Navbar","collapseOnSelect","expand","bg","Container","Brand","Toggle","aria-controls","Collapse","routeLinks","Text","pages","navBar","pageSwitch","io","sailsIOClient","socketIOClient","sails","reconnection","hostname","origin","ReactDOM","render","document","getElementById","getBooks","booksUrl","booksRes","booksCountUrl","booksCount","download","filename","downloadLogo","style","width","height","showNewButton","author","keywords","join","actionButtons","opts","request","merge","method","responseType","URL","createObjectURL","Blob","link","createElement","href","setAttribute","appendChild","click","setTimeout","removeChild","authorization","axios","token","localStorage","setItem","OrdersTable","createdAt","toLocaleDateString","owner","ordersUrl","ordersCountUrl","ordersCount","getOrders","socket","removeItem","getItem"],"mappings":"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","file":"static/js/main.5e52b9a0.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/signUpLogo.94717a01.svg\";","module.exports = __webpack_public_path__ + \"static/media/downloadLogo.eb839bb2.svg\";","import React from 'react';\nimport {Alert, Button, Form, Modal} from 'react-bootstrap';\nimport HardJwtRequest from '../services/HardJwtRequest';\nimport _ from 'lodash';\n\nclass NewBook extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.hideNew = props.hideNew;\n    this.state = {\n      newBook: {},\n      error: null\n    };\n  }\n\n  changeHandler = (event) => {\n    let changed = this.state.newBook;\n    changed[event.target.name] = event.target.value;\n    this.setState({newBook: changed});\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    const data = new FormData(event.currentTarget);\n    HardJwtRequest.post({\n      url: '/api/books',\n      data: data,\n      headers: {'content-type': 'multipart/form-data'}\n    }).then((response) => {\n      console.log(response);\n      this.hideNew();\n    }).catch((err, body) => {\n      if (_.isObject(err)) {\n        this.setState({error: err.response.data});\n      }\n      if (_.isString(err)) this.setState({error: err});\n    });\n  };\n\n  newBookForm() {\n    return (\n      <Modal.Body>\n        {this.state.error ? <Alert variant='danger'>{this.state.error}</Alert> : ''}\n        <Form.Group controlId=\"formBasicName\">\n          <Form.Label>Book Name</Form.Label>\n          <Form.Control\n            type=\"text\"\n            name=\"name\"\n            placeholder=\"Enter Book Name\"\n            onChange={this.changeHandler}\n            required/>\n        </Form.Group>\n        <Form.Group controlId=\"formBasicAuthor\">\n          <Form.Label>Author Name</Form.Label>\n          <Form.Control\n            type=\"text\"\n            name=\"author\"\n            placeholder=\"Enter Author Name\"\n            onChange={this.changeHandler}\n            required/>\n        </Form.Group>\n        <Form.Group controlId=\"formBasicPrice\">\n          <Form.Label>Price</Form.Label>\n          <Form.Control\n            type=\"number\"\n            step=\"0.01\"\n            name=\"price\"\n            placeholder=\"Enter Book Price\"\n            onChange={this.changeHandler}\n            required/>\n        </Form.Group>\n        <Form.Group controlId=\"formBasicFile\">\n          <Form.Label>Book File</Form.Label>\n          <Form.Control\n            type=\"file\"\n            name=\"bookFile\"\n            required\n            accept=\"text/plain\"\n          />\n        </Form.Group>\n      </Modal.Body>\n    );\n  }\n\n  render() {\n    return (\n      <Modal show={this.props.showNew} onHide={this.hideNew}>\n        <Form onSubmit={this.handleSubmit}>\n          <Modal.Header closeButton>\n            <Modal.Title>New book</Modal.Title>\n          </Modal.Header>\n          {this.newBookForm()}\n          <Modal.Footer>\n            <Button variant=\"secondary\" onClick={this.hideNew}>\n              Close\n            </Button>\n            <Button type=\"submit\" variant=\"primary\">\n              Save Book\n            </Button>\n          </Modal.Footer>\n        </Form>\n      </Modal>\n    );\n  }\n}\n\nexport default NewBook;\n","import React from 'react';\nimport JwtRequest from '../services/JwtRequest';\nimport {Button, Col, Row, Table, Pagination, ButtonToolbar} from 'react-bootstrap';\nimport {createBrowserHistory} from 'history';\nimport UserOrders from './UserOrders';\n\nclass UsersList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.pageSize = parseInt(this.params('pageSize')) || 5;\n    this.history = createBrowserHistory();\n    let page = parseInt(this.params('page')) || 1;\n    this.state = {\n      showOrders: false,\n      page: page,\n      pageCount: 1,\n      users: {},\n    };\n  }\n\n  componentDidMount() {\n    this.toPage(this.state.page);\n  }\n\n  params(param = null) {\n    let params = new URLSearchParams(window.location.search);\n    return param ? params.get(param) : params;\n  }\n\n  getUsers() {\n    if (this.state.page) {\n      let skip = (this.state.page - 1) * this.pageSize;\n      let url = `/api/users?skip=${skip}&limit=${this.pageSize}`;\n      // Get the Users\n      JwtRequest.get({url: url}, (usersRes, jwres) => {\n        if (jwres.statusCode === 200 && usersRes) {\n          let users = {};\n          usersRes.forEach((user) => users[user.id] = user);\n          this.setState({users: users});\n        }\n      });\n\n      // Get the count\n      JwtRequest.get({url: '/api/users/count'}, (usersCount, jwres) => {\n        if (jwres.statusCode === 200 && usersCount) {\n          let pageCount = Math.ceil(parseInt(usersCount) / this.pageSize);\n          if (this.state.page > pageCount) {\n            this.toPage(pageCount);\n          } else {\n            this.setState({pageCount: pageCount});\n          }\n\n        }\n      });\n    }\n  }\n\n  toggleActive = (user) => {\n    return () => {\n      JwtRequest.patch({url: `/api/users/${user.id}`, data: {active: !user.active}}, (user, jwres) => {\n        if (jwres.statusCode === 200 && user) {\n          let users = {...this.state.users};\n          users[user.id] = user;\n          this.setState({users: users});\n        }\n      });\n    };\n  };\n\n  showOrders = (user) => {\n    return () => {\n      this.setState({showOrders: user});\n    };\n\n  };\n\n  hideOrders = () => {\n    this.setState({showOrders: false});\n  };\n\n  toPage(page) {\n    this.setState({page: page});\n    setImmediate(() => this.getUsers());\n    this.history.push({\n      pathname: '/users',\n      search: '?' + new URLSearchParams({page: page}).toString()\n    });\n  }\n\n  pagination() {\n    let base = Math.max(this.state.page - 2, 1);\n    let max = Math.min(base + 5, this.state.pageCount);\n    let items = [];\n    for (let number = base; number <= max; number++) {\n      items.push(\n        <Pagination.Item onClick={() => this.toPage(number)} key={number} active={number === this.state.page}>\n          {number}\n        </Pagination.Item>,\n      );\n    }\n    return (\n      <Pagination>{items}</Pagination>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        {\n          !!this.state.showOrders ?\n            <UserOrders showOrders={this.state.showOrders} hideOrders={this.hideOrders}/> :\n            ''\n        }\n        <Row>\n          <Col md=\"2\">\n            <h3>Users</h3>\n          </Col>\n        </Row>\n\n        <Table striped size=\"sm\">\n          <thead>\n          <tr>\n            <th>Name</th>\n            <th>Email</th>\n            <th>Orders</th>\n            <th>Actions</th>\n          </tr>\n          </thead>\n          <tbody>\n\n          {Object.keys(this.state.users).map((id, i) => {\n            let user = this.state.users[id];\n            return (\n              <tr key={id}>\n                <td>{user.name}</td>\n                <td>{user.email}</td>\n                <td>{user.orders.length}</td>\n                <td>\n                  <ButtonToolbar>\n                    <Button variant={user.active ? 'success' : 'secondary'} onClick={this.toggleActive(user)} size=\"sm\">\n                      {user.active ? 'Active' : 'Inactive'}\n                    </Button>&nbsp;\n                    <Button variant=\"primary\" onClick={this.showOrders(user)} size=\"sm\">Orders</Button>\n                  </ButtonToolbar>\n                </td>\n              </tr>\n            );\n          })}\n          </tbody>\n        </Table>\n        <Row><Col>{this.pagination()}</Col></Row>\n      </div>\n    );\n  }\n}\n\nexport default UsersList;\n","import React from 'react';\nimport {Button, Modal} from 'react-bootstrap';\nimport OrdersTable from '../orders/OrdersTable';\nimport JwtRequest from '../services/JwtRequest';\n\nclass UserOrders extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.hideOrders = props.hideOrders;\n    this.state = {\n      orders: {},\n      error: null\n    };\n  }\n\n  componentDidMount() {\n    let url = `/api/orders/?where={\"owner\":\"${this.props.showOrders.id}\"}&sort=createdAt%20DESC&populate=owner`;\n    // Get the Users\n    JwtRequest.get({url: url}, (ordersRes, jwres) => {\n      if (jwres.statusCode === 200 && ordersRes) {\n        let orders = {};\n        ordersRes.forEach((order) => orders[order.id] = order);\n        this.setState({orders: orders});\n      }\n    });\n  }\n\n  ordersTable() {\n    return (\n      <Modal.Body>\n        <OrdersTable orders={this.state.orders}/>\n      </Modal.Body>\n    );\n  }\n\n  render() {\n    return (\n      <Modal size=\"lg\" show={!!this.props.showOrders} onHide={this.hideOrders}>\n        <Modal.Header closeButton>\n          <Modal.Title>{this.props.showOrders.name} - Orders</Modal.Title>\n        </Modal.Header>\n        {this.ordersTable()}\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={this.hideOrders}>\n            Close\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n}\n\nexport default UserOrders;\n","import React from 'react';\n\nclass Clock extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {date: new Date()};\n  }\n\n  componentDidMount() {\n    this.timerID = setInterval(\n      () => this.tick(),\n      1000\n    );\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timerID);\n  }\n\n  tick() {\n    this.setState({\n      date: new Date()\n    });\n  }\n\n  render() {\n    return (\n      <div>{this.state.date.toLocaleTimeString()}</div>\n    );\n  }\n}\n\nexport default Clock;\n","import JwtRequest from './JwtRequest';\n\nlet userData = null;\nlet authHooks = [];\n\nfunction authResponse(resData, jwres) {\n  if (jwres.statusCode === 200 && resData.user) {\n    userData = resData.user;\n  }\n  authHooks.forEach(hook => hook(userData));\n}\n\nlet gettingMe = false;\n\nexport const me = function me(cb = null) {\n  // Check if cb is not null and is not already in the hooks\n  if (cb && authHooks.indexOf(cb) < 0) {\n    authHooks.push(cb);\n  }\n  // If userData is already set, probably just a single call\n  if (userData && cb) {\n    return cb(userData);\n  }\n\n  // There is no request in course and the user data is not populated but the user is signed in.\n  if (!gettingMe && !userData && JwtRequest.jwt) {\n    gettingMe = true;\n    JwtRequest.get({url: '/api/jwt/me'}, (resData, jwres) => {\n      gettingMe = false;\n      authResponse(resData, jwres);\n    });\n  }\n};\n\n// This method is to clean unmounted components\nexport const unMe = function unMe(cb) {\n  authHooks.splice(authHooks.indexOf(cb), 1);\n};\n\nexport const logout = function logout(cb) {\n  userData = null;\n  JwtRequest.flush();\n  authHooks.forEach(hook => hook(userData));\n};\n\nexport const signUp = (data, cb) => {\n  // eslint-disable-next-line no-undef\n  JwtRequest.post({\n    url: '/api/jwt/signup',\n    data: data\n  }, (resData, jwres) => {\n    authResponse(resData, jwres);\n    cb(resData, jwres);\n  });\n};\n\nexport const signIn = (data, cb) => {\n  // eslint-disable-next-line no-undef\n  JwtRequest.post({\n    url: '/api/jwt/auth',\n    data: data\n  }, (resData, jwres) => {\n    authResponse(resData, jwres);\n    cb(resData, jwres);\n  });\n};\n","import React from 'react';\nimport {Alert} from 'react-bootstrap';\n\n\nclass AlertDismissible extends React.Component {\n  constructor(props) {\n    super(props);\n    this.children = props.children;\n    this.variant = props.variant || 'danger';\n    this.state = {\n      show: props.parentValue ? props.parentValue() : true\n    };\n  }\n\n  setShow(value) {\n    if (this.props.parentValue) {\n      this.props.parentValue(value);\n    }\n    return this.setState({show: this.props.parentValue ? this.props.parentValue() : value});\n  }\n\n  render() {\n    return this.state.show ? (<Alert variant={this.variant} onClose={() => this.setShow(false)} dismissible>\n      {this.children}\n    </Alert>) : '';\n  }\n}\n\nexport default AlertDismissible;\n","import React from 'react';\nimport {Form, Button, Row, Col} from 'react-bootstrap';\nimport {signIn} from '../services/AuthService';\nimport AlertDismissible from '../helpers/AlertDismissible';\n\nclass SignIn extends React.Component {\n  constructor(props) {\n    super(props);\n    this.children = props.children;\n    this.state = {\n      newUser: {\n        email: '',\n        password: ''\n      },\n      error: false\n    };\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.showError = this.showError.bind(this);\n  }\n\n  changeHandler = (event) => {\n    let changed = this.state.newUser;\n    changed[event.target.name] = event.target.value;\n    this.setState({newUser: changed});\n  };\n\n  handleSubmit(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    signIn(this.state.newUser, (resData, jwres) => {\n      if (jwres.statusCode === 400) {\n        return this.showError(resData);\n      }\n    });\n  };\n\n  showError(value) {\n    return value === undefined ? this.state.error : this.setState({error: value});\n  }\n\n  render() {\n    return (\n      <div className=\"UserSignUp\">\n        <Row>\n          <Col md={{span: 8}}>\n            <div className=\"UserSignIn\">\n              {\n                this.state.error ? (\n                  <AlertDismissible parentValue={this.showError}>{this.state.error}</AlertDismissible>\n                ) : ''\n              }\n              <Form onSubmit={this.handleSubmit}>\n                <Form.Group controlId=\"formBasicEmail\">\n                  <Form.Label>Email address</Form.Label>\n                  <Form.Control\n                    name=\"email\"\n                    type=\"email\"\n                    placeholder=\"Enter Email\"\n                    onChange={this.changeHandler}\n                    required/>\n                </Form.Group>\n                <Form.Group controlId=\"formBasicPassword\">\n                  <Form.Label>Password</Form.Label>\n                  <Form.Control\n                    name=\"password\"\n                    type=\"password\"\n                    placeholder=\"Password\"\n                    onChange={this.changeHandler}\n                    required\n                    minLength=\"6\"/>\n                </Form.Group>\n                <Button variant=\"primary\" type=\"submit\">Sign In</Button>\n              </Form>\n            </div>\n          </Col>\n        </Row>\n      </div>\n    );\n  }\n}\n\nexport default SignIn;\n","import React from 'react';\nimport {Form, Button, Row, Col} from 'react-bootstrap';\nimport signUpLogo from './signUpLogo.svg';\nimport AlertDismissible from '../helpers/AlertDismissible';\nimport {signUp} from '../services/AuthService';\n\nclass SignUp extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      newUser: {\n        name: '',\n        email: '',\n        password: ''\n      },\n      error: false,\n      success: false\n    };\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.showError = this.showError.bind(this);\n  }\n\n  changeHandler = (event) => {\n    let changed = this.state.newUser;\n    changed[event.target.name] = event.target.value;\n    this.setState({newUser: changed});\n  };\n\n  handleSubmit(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    signUp(this.state.newUser, (resData, jwres) => {\n      if (jwres.statusCode === 400) {\n        return this.showError(resData.message);\n      }\n    });\n  };\n\n  showError(value) {\n    return value === undefined ? this.state.error : this.setState({error: value});\n  }\n\n  render() {\n    return (\n      <div className=\"UserSignUp\">\n        <Row>\n          <Col md={{span: 8}}>\n            {\n              this.state.error ? (\n                <AlertDismissible parentValue={this.showError}>{this.state.error}</AlertDismissible>\n              ) : ''\n            }\n            <Form onSubmit={this.handleSubmit}>\n              <Form.Group controlId=\"formBasicFirstName\">\n                <Form.Label>First Name</Form.Label>\n                <Form.Control\n                  type=\"text\"\n                  name=\"name\"\n                  placeholder=\"Enter First Name\"\n                  onChange={this.changeHandler}\n                  required/>\n              </Form.Group>\n              <Form.Group controlId=\"formBasicEmail\">\n                <Form.Label>Email address</Form.Label>\n                <Form.Control\n                  name=\"email\"\n                  type=\"email\"\n                  placeholder=\"Enter Email\"\n                  onChange={this.changeHandler}\n                  required/>\n              </Form.Group>\n              <Form.Group controlId=\"formBasicPassword\">\n                <Form.Label>Password</Form.Label>\n                <Form.Control\n                  name=\"password\"\n                  type=\"password\"\n                  placeholder=\"Password\"\n                  onChange={this.changeHandler}\n                  required\n                  minLength=\"6\"/>\n              </Form.Group>\n              <Button variant=\"primary\" type=\"submit\">Sign up</Button>\n            </Form>\n          </Col>\n          <Col>\n            <img src={signUpLogo} className=\"SignUp-logo\" alt=\"logo\"/>\n          </Col>\n        </Row>\n      </div>\n    );\n  }\n}\n\nexport default SignUp;\n","import BooksList from './BooksList';\nimport {Button, ButtonToolbar} from 'react-bootstrap';\nimport React from 'react';\nimport JwtRequest from '../services/JwtRequest';\n\nclass MyBooksList extends BooksList {\n  booksUrl() {\n    let skip = (this.state.page - 1) * this.pageSize;\n    return `/api/books?skip=${skip}&limit=${this.pageSize}&where={\"active\":true}`;\n  }\n\n  booksCountUrl() {\n    return '/api/books/count?active=true';\n  }\n\n  addToCart(book) {\n    return () => {\n      JwtRequest.post({\n          url: '/api/carts',\n          data: {bookId: book.id}\n        }, (cart, jwres) => {\n          if (jwres.statusCode === 200 && cart) {\n            this.setState({redirectTo: '/cart'});\n          }\n        }\n      );\n    };\n  }\n\n  actionButtons(book) {\n    return (\n      <ButtonToolbar>\n        <Button variant=\"primary\" onClick={this.addToCart(book)} size=\"sm\">\n          Add to Cart\n        </Button>\n      </ButtonToolbar>\n    );\n  }\n\n  // Don't show the new Button\n  showNewButton() {\n    return '';\n  }\n}\n\nexport default MyBooksList;\n","import OrdersList from './OrdersList';\n\nclass MyOrdersList extends OrdersList{\n  ordersUrl(){\n    let skip = (this.state.page - 1) * this.pageSize;\n    return `/api/orders?skip=${skip}&limit=${this.pageSize}`;\n  }\n\n  ordersCountUrl(){\n    return '/api/orders/count?'\n  }\n\n  // Don't show the new Button\n  showNewButton() {\n    return '';\n  }\n}\n\nexport default MyOrdersList;\n","import React from 'react';\nimport JwtRequest from '../services/JwtRequest';\nimport {Button, Col, Row, Table} from 'react-bootstrap';\nimport {Redirect} from 'react-router-dom';\n\n\nclass Cart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      redirectTo: null,\n      books: [],\n      total: 0\n    };\n  }\n\n  componentDidMount() {\n    this.getCart();\n  }\n\n  getCart() {\n    // Get the count\n    JwtRequest.get({url: '/api/carts'}, (books, jwres) => {\n      if (jwres.statusCode === 200 && books) {\n        let total = books.reduce((acc, book) => {\n          return acc + book.price;\n        }, 0);\n        this.setState({\n          books: books,\n          total: total\n        });\n      }\n    });\n  }\n\n  placeOrder = ()=> {\n    JwtRequest.post({url: '/api/carts/placeOrder'}, (books, jwres) => {\n      if (jwres.statusCode === 200 && books) {\n        this.setState({redirectTo:'/orders'});\n      }\n    });\n  };\n\n  render() {\n    if(this.state.redirectTo){\n      return <Redirect to={this.state.redirectTo} />\n    }\n    return (\n      <div>\n        <Row>\n          <Col md=\"2\">\n            <h3>Cart</h3>\n          </Col>\n        </Row>\n        <Table striped size=\"sm\">\n          <thead>\n          <tr>\n            <th>Book</th>\n            <th>Price</th>\n          </tr>\n          </thead>\n          <tbody>\n          {\n            this.state.books.map((book) =>\n              <tr key={book.id}>\n                <td>{book.name}</td>\n                <td>{book.price}</td>\n              </tr>\n            )}\n          </tbody>\n          <thead>\n          <tr>\n            <th>Total</th>\n            <th>{this.state.total}</th>\n          </tr>\n          </thead>\n        </Table>\n\n        <Button onClick={this.placeOrder} variant=\"primary\" disabled={!this.state.books.length}>Place Order</Button>\n      </div>\n    );\n  }\n}\n\nexport default Cart;\n","import React from 'react';\nimport SignIn from '../auth/SignIn';\nimport SignUp from '../auth/SignUp';\nimport BooksList from '../books/BooksList';\nimport UsersList from '../users/UserList';\nimport MyBooksList from '../books/MyBooksList';\nimport OrdersList from '../orders/OrdersList';\nimport MyOrdersList from '../orders/MyOrdersList';\nimport Cart from '../cart/Cart';\n\nconst defaultMenu = {\n  routes: [\n    ['/sign_in', 'Sign In'],\n    ['/sign_up', 'Sign Up'],\n  ],\n  switch: [\n    ['/sign_up', <SignUp/>],\n    ['/sign_in', <SignIn/>]\n  ]\n};\n\nconst menuByUser = {\n  user: {\n    routes: [\n      ['/books', 'Books'],\n      ['/orders', 'My orders'],\n      ['/cart', 'My cart'],\n    ],\n    switch: [\n      ['/books', <MyBooksList/>],\n      ['/orders', <MyOrdersList/>],\n      ['/cart', <Cart/>],\n    ]\n  },\n  admin: {\n    routes: [\n      ['/books', 'Books'],\n      ['/users', 'Users'],\n      ['/orders', 'Orders'],\n    ],\n    switch: [\n      ['/books', <BooksList/>],\n      ['/users', <UsersList/>],\n      ['/orders', <OrdersList/>],\n    ]\n  }\n};\n\nclass Menus {\n  static roleMenu(role) {\n    return role ? menuByUser[role] : defaultMenu;\n  }\n}\n\nexport default Menus;\n","import React from 'react';\nimport {Col, Container, Nav, Navbar, Row} from 'react-bootstrap';\nimport {BrowserRouter as Router, Link, Switch, Route} from 'react-router-dom';\nimport Clock from './components/helpers/Clock';\nimport {logout, me} from './components/services/AuthService';\nimport Menus from './components/helpers/Menus';\n\nfunction Home() {\n  return <h2>Welcome to the Book Store</h2>;\n}\n\nfunction About() {\n  return <h2>About</h2>;\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      user: null\n    };\n\n    this.setUser = this.setUser.bind(this);\n    me(this.setUser);\n  }\n\n  setUser(userData) {\n    this.setState({user: userData});\n  }\n\n  userRole() {\n    return this.state.user && this.state.user.accountType;\n  }\n\n  userMenu() {\n    return Menus.roleMenu(this.userRole());\n  }\n\n  pages() {\n    return this.userMenu().switch.map((page, idx) => <Route path={page[0]} key={page[0]}>{page[1]}</Route>);\n  }\n\n  routeLinks() {\n    return this.userMenu().routes.map((route) => <Nav.Link key={route[0]} as={Link} to={route[0]}>{route[1]}</Nav.Link>);\n  }\n\n  navBar() {\n    return (\n      <Navbar collapseOnSelect expand=\"lg\" bg=\"primary\" variant=\"dark\">\n        <Container>\n          <Navbar.Brand as={Link} to=\"/\">Book Store</Navbar.Brand>\n          <Navbar.Toggle aria-controls=\"responsive-navbar-nav\"/>\n          <Navbar.Collapse id=\"responsive-navbar-nav\">\n            <Nav className=\"mr-auto\">\n              {this.routeLinks()}\n            </Nav>\n\n            <Nav>\n              <Nav.Link as={Link} to=\"/about\">About</Nav.Link>\n              {this.userRole() ? <Nav.Link onClick={logout}>Logout</Nav.Link> : ''}\n              <Navbar.Text><Clock/></Navbar.Text>\n            </Nav>\n          </Navbar.Collapse>\n        </Container>\n      </Navbar>\n    );\n  }\n\n  pageSwitch() {\n    return (\n      <Switch>\n        {this.pages()}\n        <Route path=\"/about\">\n          <About/>\n        </Route>\n        <Route path=\"/\">\n          <Home/>\n        </Route>\n      </Switch>\n    );\n  }\n\n  render() {\n    return (\n      <Router>\n        {this.navBar()}\n        <Container className=\"main\">\n          <Row>\n            <Col>{this.pageSwitch()}</Col>\n          </Row>\n        </Container>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport socketIOClient from 'socket.io-client';\nimport sailsIOClient from 'sails.io.js';\n\nimport './index.scss';\n\nimport App from './App';\n\nlet io = sailsIOClient(socketIOClient);\nio.sails.reconnection = true;\nio.sails.url = window.location.hostname === 'localhost' ? `http://${window.location.hostname}:1337` : window.location.origin;\nwindow.io = io;\n\nReactDOM.render(<App/>, document.getElementById('root'));\n","import React from 'react';\nimport JwtRequest from '../services/JwtRequest';\nimport {Button, Col, Row, Table, Pagination, ButtonToolbar} from 'react-bootstrap';\nimport downloadLogo from '../helpers/downloadLogo.svg';\nimport NewBook from './NewBook';\nimport HardJwtRequest from '../services/HardJwtRequest';\nimport {createBrowserHistory} from 'history';\nimport {Redirect} from 'react-router-dom';\n\nclass BooksList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.pageSize = parseInt(this.params('pageSize')) || 5;\n    this.history = createBrowserHistory();\n    let page = parseInt(this.params('page')) || 1;\n    this.state = {\n      showNew: false,\n      page: page,\n      pageCount: 1,\n      books: {},\n      userRole: null,\n      redirectTo: null\n    };\n  }\n\n  componentDidMount() {\n    this.toPage(this.state.page);\n  }\n\n  params(param = null) {\n    let params = new URLSearchParams(window.location.search);\n    return param ? params.get(param) : params;\n  }\n\n  booksUrl() {\n    let skip = (this.state.page - 1) * this.pageSize;\n    return `/api/books?skip=${skip}&limit=${this.pageSize}`;\n  }\n\n  booksCountUrl() {\n    return '/api/books/count';\n  }\n\n  getBooks() {\n    if (this.state.page) {\n      // Get the Books\n      JwtRequest.get({url: this.booksUrl()}, (booksRes, jwres) => {\n        if (jwres.statusCode === 200 && booksRes) {\n          let books = {};\n          booksRes.forEach((book) => books[book.id] = book);\n          this.setState({books: books});\n        }\n      });\n\n      // Get the count\n      JwtRequest.get({url: this.booksCountUrl()}, (booksCount, jwres) => {\n        if (jwres.statusCode === 200 && booksCount) {\n          let pageCount = Math.ceil(parseInt(booksCount) / this.pageSize);\n          if (this.state.page > pageCount) {\n            this.toPage(pageCount);\n          } else {\n            this.setState({pageCount: pageCount});\n          }\n\n        }\n      });\n    }\n  }\n\n  toggleActive = (book) => {\n    return () => {\n      JwtRequest.patch({url: `/api/books/${book.id}`, data: {active: !book.active}}, (book, jwres) => {\n        if (jwres.statusCode === 200 && book) {\n          let books = {...this.state.books};\n          books[book.id] = book;\n          this.setState({books: books});\n        }\n      });\n    };\n  };\n\n  showNew = () => {\n    this.setState({showNew: true});\n  };\n\n  hideNew = () => {\n    this.getBooks();\n    this.setState({showNew: false});\n  };\n\n  download(book) {\n    return () => {\n      HardJwtRequest.download({url: `/api/books/${book.id}/download`, filename: book.name});\n    };\n  }\n\n  toPage(page) {\n    this.setState({page: page});\n    setImmediate(() => this.getBooks());\n    this.history.push({\n      pathname: '/books',\n      search: '?' + new URLSearchParams({page: page}).toString()\n    });\n  }\n\n  pagination() {\n    let base = Math.max(this.state.page - 2, 1);\n    let max = Math.min(base + 5, this.state.pageCount);\n    let items = [];\n    for (let number = base; number <= max; number++) {\n      items.push(\n        <Pagination.Item onClick={() => this.toPage(number)} key={number} active={number === this.state.page}>\n          {number}\n        </Pagination.Item>,\n      );\n    }\n    return (\n      <Pagination>{items}</Pagination>\n    );\n  }\n\n  actionButtons(book) {\n    return (\n      <ButtonToolbar>\n        <Button variant=\"link\" onClick={this.download(book)}>\n          <img src={downloadLogo} style={{width: 20, height: 20}} className=\"Download-logo\" alt=\"logo\"/>\n        </Button>\n        <Button variant={book.active ? 'success' : 'secondary'} onClick={this.toggleActive(book)}\n                size=\"sm\">\n          {book.active ? 'Active' : 'Inactive'}\n        </Button>\n      </ButtonToolbar>\n    );\n  }\n\n  showNewButton() {\n    return (\n      <Col>\n        <Button variant=\"primary\" onClick={this.showNew}> New </Button>\n      </Col>\n    );\n  }\n\n  render() {\n    if(this.state.redirectTo){\n      return <Redirect to={this.state.redirectTo} />\n    }\n    return (\n      <div>\n        <NewBook showNew={this.state.showNew} hideNew={this.hideNew}/>\n        <Row>\n          <Col md=\"2\">\n            <h3>Books</h3>\n          </Col>\n          {this.showNewButton()}\n        </Row>\n\n        <Table striped size=\"sm\">\n          <thead>\n          <tr>\n            <th>Name</th>\n            <th>Author</th>\n            <th>Price</th>\n            <th>Keywords</th>\n            <th>Actions</th>\n          </tr>\n          </thead>\n          <tbody>\n\n          {Object.keys(this.state.books).map((id, i) => {\n            let book = this.state.books[id];\n            return (\n              <tr key={id}>\n                <td>{book.name}</td>\n                <td>{book.author}</td>\n                <td>{book.price}</td>\n                <td>{book.keywords && book.keywords.join(', ')}</td>\n                <td>{this.actionButtons(book)}</td>\n              </tr>\n            );\n          })}\n          </tbody>\n        </Table>\n        <Row><Col>{this.pagination()}</Col></Row>\n      </div>\n    );\n  }\n}\n\nexport default BooksList;\n","import _ from 'lodash';\nimport axios from 'axios';\nimport JwtRequest from './JwtRequest';\n\n\nclass HardJwtRequest {\n  static get(opts, cb) {\n    return HardJwtRequest.request(_.merge({}, opts, {method: 'GET'}), cb);\n  }\n\n  static post(opts, cb) {\n    return HardJwtRequest.request(_.merge({}, opts, {method: 'POST'}), cb);\n  }\n\n  static patch(opts, cb) {\n    return HardJwtRequest.request(_.merge({}, opts, {method: 'PATCH'}), cb);\n  }\n\n  static download(opts) {\n    let filename;\n    if(opts.filename){\n      filename = opts.filename;\n      delete opts.filename\n    }\n    return HardJwtRequest.request(_.merge({}, opts, {method: 'GET', responseType: 'blob'}))\n    .then((response) => {\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', `${filename || 'book'}.txt`);\n      document.body.appendChild(link);\n      link.click();\n      setTimeout(() => document.body.removeChild(link), 1000);\n    });\n  }\n\n  static request(opts, cb) {\n    opts = _.merge(opts, {\n      headers: {authorization: `Bearer ${JwtRequest.jwt}`}\n    });\n\n    // eslint-disable-next-line no-undef\n    opts['url'] = `${io.sails.url}${opts['url']}`;\n    return axios.request(opts, (resData, jwres) => {\n      if (jwres.statusCode === 200 && resData.token) {\n        localStorage.setItem('jwt', JwtRequest.jwt = resData.token);\n      }\n      cb(resData, jwres);\n    });\n  }\n\n}\n\nexport default HardJwtRequest;\n","import {Table} from 'react-bootstrap';\nimport React from 'react';\n\n/**\n * @return {string}\n */\nfunction OrdersTable(props) {\n  return !props.orders ? '' : (\n    <Table striped size=\"sm\">\n      <thead>\n      <tr>\n        <th>Order ID</th>\n        <th>Date</th>\n        <th>User Email</th>\n        <th>Books</th>\n      </tr>\n      </thead>\n      <tbody>\n      {Object.keys(props.orders).map((id) => {\n        let order = props.orders[id];\n        return (\n          <tr key={id}>\n            <td>{id}</td>\n            <td>{(new Date(order.createdAt)).toLocaleDateString()}</td>\n            <td>{order.owner.email}</td>\n            <td>{\n              order.books.map(book=>\n                <div key={book.id}>- {book.name}</div>\n              )\n            }</td>\n          </tr>\n        );\n      })}\n      </tbody>\n    </Table>\n  )\n}\n\nexport default OrdersTable;\n","import React from 'react';\nimport JwtRequest from '../services/JwtRequest';\nimport {Col, Row, Pagination} from 'react-bootstrap';\nimport {createBrowserHistory} from 'history';\nimport OrdersTable from './OrdersTable';\n\nclass OrdersList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.pageSize = parseInt(this.params('pageSize')) || 5;\n    this.history = createBrowserHistory();\n    let page = parseInt(this.params('page')) || 1;\n    this.state = {\n      page: page,\n      pageCount: 1,\n      orders: {},\n    };\n  }\n\n  componentDidMount() {\n    this.toPage(this.state.page);\n  }\n\n  params(param = null) {\n    let params = new URLSearchParams(window.location.search);\n    return param ? params.get(param) : params;\n  }\n\n  ordersUrl(){\n    let skip = (this.state.page - 1) * this.pageSize;\n    return `/api/orders?skip=${skip}&limit=${this.pageSize}`;\n  }\n\n  ordersCountUrl(){\n    return '/api/orders/count'\n  }\n\n  getOrders() {\n    if (this.state.page) {\n\n      // Get the orders\n      JwtRequest.get({url: this.ordersUrl()}, (ordersRes, jwres) => {\n        if (jwres.statusCode === 200 && ordersRes) {\n          let orders = {};\n          ordersRes.forEach((user) => orders[user.id] = user);\n          this.setState({orders: orders});\n        }\n      });\n\n      // Get the count\n      JwtRequest.get({url: this.ordersCountUrl()}, (ordersCount, jwres) => {\n        if (jwres.statusCode === 200 && ordersCount) {\n          let pageCount = Math.ceil(parseInt(ordersCount) / this.pageSize);\n          if (this.state.page > pageCount) {\n            this.toPage(pageCount);\n          } else {\n            this.setState({pageCount: pageCount});\n          }\n\n        }\n      });\n    }\n  }\n\n  toPage(page) {\n    this.setState({page: page});\n    setImmediate(() => this.getOrders());\n    this.history.push({\n      pathname: '/orders',\n      search: '?' + new URLSearchParams({page: page}).toString()\n    });\n  }\n\n  pagination() {\n    let base = Math.max(this.state.page - 2, 1);\n    let max = Math.min(base + 5, this.state.pageCount);\n    let items = [];\n    for (let number = base; number <= max; number++) {\n      items.push(\n        <Pagination.Item onClick={() => this.toPage(number)} key={number} active={number === this.state.page}>\n          {number}\n        </Pagination.Item>,\n      );\n    }\n    return (\n      <Pagination>{items}</Pagination>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        <Row>\n          <Col md=\"2\">\n            <h3>Orders</h3>\n          </Col>\n        </Row>\n        <OrdersTable orders={this.state.orders}/>\n        <Row><Col>{this.pagination()}</Col></Row>\n      </div>\n    );\n  }\n}\n\nexport default OrdersList;\n","import _ from 'lodash';\n\nclass JwtRequest {\n  static get(opts, cb) {\n    JwtRequest.request(_.merge({}, opts, {method: 'GET'}), cb);\n  }\n\n  static post(opts, cb) {\n    JwtRequest.request(_.merge({}, opts, {method: 'POST'}), cb);\n  }\n\n  static patch(opts, cb) {\n    JwtRequest.request(_.merge({}, opts, {method: 'PATCH'}), cb);\n  }\n\n  static request(opts, cb) {\n    // eslint-disable-next-line no-undef\n    io.socket.request(_.merge({}, opts, {\n      headers: {authorization: `Bearer ${JwtRequest.jwt}`}\n    }), (resData, jwres) => {\n      if (jwres.statusCode === 200 && resData.token) {\n        localStorage.setItem('jwt', JwtRequest.jwt = resData.token);\n      }\n      cb(resData, jwres);\n    });\n  }\n\n  static flush() {\n    JwtRequest.jwt = undefined;\n    localStorage.removeItem('jwt');\n  }\n}\n\nJwtRequest.jwt = localStorage.getItem('jwt');\n\nexport default JwtRequest;\n"],"sourceRoot":""}