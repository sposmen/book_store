{"version":3,"sources":["components/services/JwtRequest.js","components/auth/signUpLogo.svg","components/helpers/downloadLogo.svg","components/books/NewBook.js","components/users/UserList.js","components/users/UserOrders.js","components/services/AuthService.js","components/helpers/Clock.js","components/helpers/AlertDismissible.js","components/auth/SignIn.js","components/auth/SignUp.js","components/books/MyBooksList.js","components/orders/MyOrdersList.js","components/cart/Cart.js","components/helpers/Menus.js","App.js","index.js","components/books/BooksList.js","components/services/HardJwtRequest.js","components/orders/OrdersTable.js","components/orders/OrdersList.js"],"names":["JwtRequest","opts","cb","request","_","merge","method","io","socket","headers","authorization","jwt","resData","jwres","statusCode","token","localStorage","setItem","undefined","removeItem","getItem","module","exports","NewBook","props","changeHandler","event","changed","state","newBook","target","name","value","setState","newUser","handleSubmit","preventDefault","stopPropagation","data","FormData","file","document","getElementById","append","files","Object","keys","forEach","key","HardJwtRequest","post","url","then","response","console","log","hideNew","catch","err","body","isObject","error","isString","Body","this","variant","Group","controlId","Label","Control","type","placeholder","onChange","required","step","accept","show","showNew","onHide","onSubmit","Header","closeButton","Title","newBookForm","Footer","onClick","React","Component","UsersList","userRole","me","accountType","toggleActive","user","patch","id","active","users","showOrders","hideOrders","pageSize","parseInt","params","history","createBrowserHistory","page","pageCount","toPage","param","URLSearchParams","window","location","search","get","skip","usersRes","usersCount","Math","ceil","setImmediate","getUsers","push","pathname","toString","base","max","min","items","number","Item","md","striped","size","map","i","email","orders","length","pagination","UserOrders","ordersRes","order","ordersTable","userData","authHooks","authResponse","hook","gettingMe","indexOf","logout","flush","signUp","signIn","Clock","date","Date","timerID","setInterval","tick","clearInterval","toLocaleTimeString","AlertDismissible","children","parentValue","Alert","onClose","setShow","dismissible","SignIn","password","bind","showError","className","Row","Col","span","Form","minLength","Button","SignUp","success","message","src","signUpLogo","alt","MyBooksList","book","bookId","cart","redirectTo","ButtonToolbar","addToCart","BooksList","MyOrdersList","OrdersList","Cart","books","total","getCart","reduce","acc","price","Table","defaultMenu","routes","switch","menuByUser","admin","Menus","role","Home","About","App","setUser","roleMenu","userMenu","idx","path","route","Nav","Link","as","to","Navbar","collapseOnSelect","expand","bg","Container","Brand","Toggle","aria-controls","Collapse","routeLinks","Text","pages","navBar","pageSwitch","sailsIOClient","socketIOClient","sails","reconnection","hostname","origin","ReactDOM","render","getBooks","booksUrl","booksRes","booksCountUrl","booksCount","download","filename","downloadLogo","style","width","height","showNewButton","author","keywords","join","actionButtons","responseType","URL","createObjectURL","Blob","link","createElement","href","setAttribute","appendChild","click","setTimeout","removeChild","axios","OrdersTable","createdAt","toLocaleDateString","owner","ordersUrl","ordersCountUrl","ordersCount","getOrders"],"mappings":"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","file":"static/js/main.34938b3a.chunk.js","sourcesContent":["import _ from 'lodash';\n\nclass JwtRequest {\n  static get(opts, cb) {\n    JwtRequest.request(_.merge({}, opts, {method: 'GET'}), cb);\n  }\n\n  static post(opts, cb) {\n    JwtRequest.request(_.merge({}, opts, {method: 'POST'}), cb);\n  }\n\n  static patch(opts, cb) {\n    JwtRequest.request(_.merge({}, opts, {method: 'PATCH'}), cb);\n  }\n\n  static request(opts, cb) {\n    // eslint-disable-next-line no-undef\n    io.socket.request(_.merge({}, opts, {\n      headers: {authorization: `Bearer ${JwtRequest.jwt}`}\n    }), (resData, jwres) => {\n      if (jwres.statusCode === 200 && resData.token) {\n        localStorage.setItem('jwt', JwtRequest.jwt = resData.token);\n      }\n      cb(resData, jwres);\n    });\n  }\n\n  static flush() {\n    JwtRequest.jwt = undefined;\n    localStorage.removeItem('jwt');\n  }\n}\n\nJwtRequest.jwt = localStorage.getItem('jwt');\n\nexport default JwtRequest;\n","module.exports = __webpack_public_path__ + \"static/media/signUpLogo.94717a01.svg\";","module.exports = __webpack_public_path__ + \"static/media/downloadLogo.eb839bb2.svg\";","import React from 'react';\nimport {Alert, Button, Form, Modal} from 'react-bootstrap';\nimport HardJwtRequest from '../services/HardJwtRequest';\nimport _ from 'lodash';\n\nclass NewBook extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.hideNew = props.hideNew;\n    this.state = {\n      newBook: {},\n      error: null\n    };\n  }\n\n  changeHandler = (event) => {\n    let changed = this.state.newBook;\n    changed[event.target.name] = event.target.value;\n    this.setState({newUser: changed});\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    const data = new FormData();\n    let file = document.getElementById('formBasicFile');\n    data.append('bookFile', file.files[0]);\n    Object.keys(this.state.newBook).forEach((key) => {\n      data.append(key, this.state.newBook[key]);\n    });\n    HardJwtRequest.post({\n      url: '/api/books',\n      data: data,\n      headers: {'content-type': 'multipart/form-data'}\n    }).then((response) => {\n      console.log(response);\n      this.hideNew();\n    }).catch((err, body) => {\n      debugger\n      if (_.isObject(err)) {\n        this.setState({error: err.response.data});\n      }\n      if (_.isString(err)) this.setState({error: err});\n    });\n  };\n\n  newBookForm() {\n    return (\n      <Modal.Body>\n        {this.state.error ? <Alert variant='danger'>{this.state.error}</Alert> : ''}\n        <Form.Group controlId=\"formBasicName\">\n          <Form.Label>Book Name</Form.Label>\n          <Form.Control\n            type=\"text\"\n            name=\"name\"\n            placeholder=\"Enter Book Name\"\n            onChange={this.changeHandler}\n            required/>\n        </Form.Group>\n        <Form.Group controlId=\"formBasicAuthor\">\n          <Form.Label>Author Name</Form.Label>\n          <Form.Control\n            type=\"text\"\n            name=\"author\"\n            placeholder=\"Enter Author Name\"\n            onChange={this.changeHandler}\n            required/>\n        </Form.Group>\n        <Form.Group controlId=\"formBasicPrice\">\n          <Form.Label>Price</Form.Label>\n          <Form.Control\n            type=\"number\"\n            step=\"0.01\"\n            name=\"price\"\n            placeholder=\"Enter Book Price\"\n            onChange={this.changeHandler}\n            required/>\n        </Form.Group>\n        <Form.Group controlId=\"formBasicFile\">\n          <Form.Label>Book File</Form.Label>\n          <Form.Control\n            type=\"file\"\n            name=\"bookFile\"\n            required\n            accept=\"text/plain\"\n          />\n        </Form.Group>\n      </Modal.Body>\n    );\n  }\n\n  render() {\n    return (\n      <Modal show={this.props.showNew} onHide={this.hideNew}>\n        <Form onSubmit={this.handleSubmit}>\n          <Modal.Header closeButton>\n            <Modal.Title>New book</Modal.Title>\n          </Modal.Header>\n          {this.newBookForm()}\n          <Modal.Footer>\n            <Button variant=\"secondary\" onClick={this.hideNew}>\n              Close\n            </Button>\n            <Button type=\"submit\" variant=\"primary\" onClick={this.handleSubmit}>\n              Save Book\n            </Button>\n          </Modal.Footer>\n        </Form>\n      </Modal>\n    );\n  }\n}\n\nexport default NewBook;\n","import React from 'react';\nimport JwtRequest from '../services/JwtRequest';\nimport {Button, Col, Row, Table, Pagination, ButtonToolbar} from 'react-bootstrap';\nimport {createBrowserHistory} from 'history';\nimport {me} from '../services/AuthService';\nimport UserOrders from './UserOrders';\n\nclass UsersList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.pageSize = parseInt(this.params('pageSize')) || 5;\n    this.history = createBrowserHistory();\n    let page = parseInt(this.params('page')) || 1;\n    this.state = {\n      showOrders: false,\n      page: page,\n      pageCount: 1,\n      users: {},\n      userRole: null\n    };\n  }\n\n  userRole = (me) => {\n    this.setState({'userRole': me ? me.accountType : null});\n  };\n\n  componentDidMount() {\n    me(this.userRole);\n    this.toPage(this.state.page);\n  }\n\n  params(param = null) {\n    let params = new URLSearchParams(window.location.search);\n    return param ? params.get(param) : params;\n  }\n\n  getUsers() {\n    if (this.state.page) {\n      let skip = (this.state.page - 1) * this.pageSize;\n      let url = `/api/users?skip=${skip}&limit=${this.pageSize}`;\n      // Get the Users\n      JwtRequest.get({url: url}, (usersRes, jwres) => {\n        if (jwres.statusCode === 200 && usersRes) {\n          let users = {};\n          usersRes.forEach((user) => users[user.id] = user);\n          this.setState({users: users});\n        }\n      });\n\n      // Get the count\n      JwtRequest.get({url: '/api/users/count'}, (usersCount, jwres) => {\n        if (jwres.statusCode === 200 && usersCount) {\n          let pageCount = Math.ceil(parseInt(usersCount) / this.pageSize);\n          if (this.state.page > pageCount) {\n            this.toPage(pageCount);\n          } else {\n            this.setState({pageCount: pageCount});\n          }\n\n        }\n      });\n    }\n  }\n\n  toggleActive = (user) => {\n    return () => {\n      JwtRequest.patch({url: `/api/users/${user.id}`, data: {active: !user.active}}, (user, jwres) => {\n        if (jwres.statusCode === 200 && user) {\n          let users = {...this.state.users};\n          users[user.id] = user;\n          this.setState({users: users});\n        }\n      });\n    };\n  };\n\n  showOrders = (user) => {\n    return () => {\n      this.setState({showOrders: user});\n    };\n\n  };\n\n  hideOrders = () => {\n    this.setState({showOrders: false});\n  };\n\n  toPage(page) {\n    this.setState({page: page});\n    setImmediate(() => this.getUsers());\n    this.history.push({\n      pathname: '/users',\n      search: '?' + new URLSearchParams({page: page}).toString()\n    });\n  }\n\n  pagination() {\n    let base = Math.max(this.state.page - 2, 1);\n    let max = Math.min(base + 5, this.state.pageCount);\n    let items = [];\n    for (let number = base; number <= max; number++) {\n      items.push(\n        <Pagination.Item onClick={() => this.toPage(number)} key={number} active={number === this.state.page}>\n          {number}\n        </Pagination.Item>,\n      );\n    }\n    return (\n      <Pagination>{items}</Pagination>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        {\n          !!this.state.showOrders ?\n            <UserOrders showOrders={this.state.showOrders} hideOrders={this.hideOrders}/> :\n            ''\n        }\n        <Row>\n          <Col md=\"2\">\n            <h3>Users</h3>\n          </Col>\n        </Row>\n\n        <Table striped size=\"sm\">\n          <thead>\n          <tr>\n            <th>Name</th>\n            <th>Email</th>\n            <th>Orders</th>\n            <th>Actions</th>\n          </tr>\n          </thead>\n          <tbody>\n\n          {Object.keys(this.state.users).map((id, i) => {\n            let user = this.state.users[id];\n            return (\n              <tr key={id}>\n                <td>{user.name}</td>\n                <td>{user.email}</td>\n                <td>{user.orders.length}</td>\n                <td>\n                  <ButtonToolbar>\n                    <Button variant={user.active ? 'success' : 'secondary'} onClick={this.toggleActive(user)} size=\"sm\">\n                      {user.active ? 'Active' : 'Inactive'}\n                    </Button>&nbsp;\n                    <Button variant=\"primary\" onClick={this.showOrders(user)} size=\"sm\">Orders</Button>\n                  </ButtonToolbar>\n                </td>\n              </tr>\n            );\n          })}\n          </tbody>\n        </Table>\n        <Row><Col>{this.pagination()}</Col></Row>\n      </div>\n    );\n  }\n}\n\nexport default UsersList;\n","import React from 'react';\nimport {Button, Modal} from 'react-bootstrap';\nimport OrdersTable from '../orders/OrdersTable';\nimport JwtRequest from '../services/JwtRequest';\n\nclass UserOrders extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.hideOrders = props.hideOrders;\n    this.state = {\n      orders: {},\n      error: null\n    };\n  }\n\n  componentDidMount() {\n    let url = `/api/orders/?where={\"owner\":\"${this.props.showOrders.id}\"}&sort=createdAt%20DESC&populate=books,owner`;\n    // Get the Users\n    JwtRequest.get({url: url}, (ordersRes, jwres) => {\n      if (jwres.statusCode === 200 && ordersRes) {\n        let orders = {};\n        ordersRes.forEach((order) => orders[order.id] = order);\n        this.setState({orders: orders});\n      }\n    });\n  }\n\n  ordersTable() {\n    return (\n      <Modal.Body>\n        <OrdersTable orders={this.state.orders}/>\n      </Modal.Body>\n    );\n  }\n\n  render() {\n    return (\n      <Modal size=\"lg\" show={!!this.props.showOrders} onHide={this.hideOrders}>\n        <Modal.Header closeButton>\n          <Modal.Title>{this.props.showOrders.name} - Orders</Modal.Title>\n        </Modal.Header>\n        {this.ordersTable()}\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={this.hideOrders}>\n            Close\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n}\n\nexport default UserOrders;\n","import JwtRequest from './JwtRequest';\n\nlet userData = null;\nlet authHooks = [];\n\nfunction authResponse(resData, jwres) {\n  if (jwres.statusCode === 200 && resData.user) {\n    userData = resData.user;\n  }\n  authHooks.forEach(hook => hook(userData));\n}\n\nlet gettingMe = false;\n\nexport const me = function me(cb = null) {\n  // Check if cb is not null and is not already in the hooks\n  if (cb && authHooks.indexOf(cb) < 0) {\n    authHooks.push(cb);\n  }\n  // If userData is already set, probably just a single call\n  if (userData && cb) {\n    return cb(userData);\n  }\n\n  // There is no request in course and the user data is not populated but the user is signed in.\n  if (!gettingMe && !userData && JwtRequest.jwt) {\n    gettingMe = true;\n    JwtRequest.get({url: '/api/jwt/me'}, (resData, jwres) => {\n      gettingMe = false;\n      authResponse(resData, jwres);\n    });\n  }\n};\n\nexport const logout = function logout(cb) {\n  userData = null;\n  JwtRequest.flush();\n  authHooks.forEach(hook => hook(userData));\n};\n\nexport const signUp = (data, cb) => {\n  // eslint-disable-next-line no-undef\n  JwtRequest.post({\n    url: '/api/jwt/signup',\n    data: data\n  }, (resData, jwres) => {\n    authResponse(resData, jwres);\n    cb(resData, jwres);\n  });\n};\n\nexport const signIn = (data, cb) => {\n  // eslint-disable-next-line no-undef\n  JwtRequest.post({\n    url: '/api/jwt/auth',\n    data: data\n  }, (resData, jwres) => {\n    authResponse(resData, jwres);\n    cb(resData, jwres);\n  });\n};\n","import React from 'react';\n\nclass Clock extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {date: new Date()};\n  }\n\n  componentDidMount() {\n    this.timerID = setInterval(\n      () => this.tick(),\n      1000\n    );\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timerID);\n  }\n\n  tick() {\n    this.setState({\n      date: new Date()\n    });\n  }\n\n  render() {\n    return (\n      <div>{this.state.date.toLocaleTimeString()}</div>\n    );\n  }\n}\n\nexport default Clock;\n","import React from 'react';\nimport {Alert} from 'react-bootstrap';\n\n\nclass AlertDismissible extends React.Component {\n  constructor(props) {\n    super(props);\n    this.children = props.children;\n    this.variant = props.variant || 'danger';\n    this.state = {\n      show: props.parentValue ? props.parentValue() : true\n    };\n  }\n\n  setShow(value) {\n    if (this.props.parentValue) {\n      this.props.parentValue(value);\n    }\n    return this.setState({show: this.props.parentValue ? this.props.parentValue() : value});\n  }\n\n  render() {\n    return this.state.show ? (<Alert variant={this.variant} onClose={() => this.setShow(false)} dismissible>\n      {this.children}\n    </Alert>) : '';\n  }\n}\n\nexport default AlertDismissible;\n","import React from 'react';\nimport {Form, Button, Row, Col} from 'react-bootstrap';\nimport {signIn} from '../services/AuthService';\nimport AlertDismissible from '../helpers/AlertDismissible';\n\nclass SignIn extends React.Component {\n  constructor(props) {\n    super(props);\n    this.children = props.children;\n    this.state = {\n      newUser: {\n        email: '',\n        password: ''\n      },\n      error: false\n    };\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.showError = this.showError.bind(this);\n  }\n\n  changeHandler = (event) => {\n    let changed = this.state.newUser;\n    changed[event.target.name] = event.target.value;\n    this.setState({newUser: changed});\n  };\n\n  handleSubmit(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    signIn(this.state.newUser, (resData, jwres) => {\n      if (jwres.statusCode === 400) {\n        return this.showError(resData);\n      }\n    });\n  };\n\n  showError(value) {\n    return value === undefined ? this.state.error : this.setState({error: value});\n  }\n\n  render() {\n    return (\n      <div className=\"UserSignUp\">\n        <Row>\n          <Col md={{span: 8}}>\n            <div className=\"UserSignIn\">\n              {\n                this.state.error ? (\n                  <AlertDismissible parentValue={this.showError}>{this.state.error}</AlertDismissible>\n                ) : ''\n              }\n              <Form onSubmit={this.handleSubmit}>\n                <Form.Group controlId=\"formBasicEmail\">\n                  <Form.Label>Email address</Form.Label>\n                  <Form.Control\n                    name=\"email\"\n                    type=\"email\"\n                    placeholder=\"Enter Email\"\n                    onChange={this.changeHandler}\n                    required/>\n                </Form.Group>\n                <Form.Group controlId=\"formBasicPassword\">\n                  <Form.Label>Password</Form.Label>\n                  <Form.Control\n                    name=\"password\"\n                    type=\"password\"\n                    placeholder=\"Password\"\n                    onChange={this.changeHandler}\n                    required\n                    minLength=\"6\"/>\n                </Form.Group>\n                <Button variant=\"primary\" type=\"submit\">Sign In</Button>\n              </Form>\n            </div>\n          </Col>\n        </Row>\n      </div>\n    );\n  }\n}\n\nexport default SignIn;\n","import React from 'react';\nimport {Form, Button, Row, Col} from 'react-bootstrap';\nimport signUpLogo from './signUpLogo.svg';\nimport AlertDismissible from '../helpers/AlertDismissible';\nimport {signUp} from '../services/AuthService';\n\nclass SignUp extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      newUser: {\n        name: '',\n        email: '',\n        password: ''\n      },\n      error: false,\n      success: false\n    };\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.showError = this.showError.bind(this);\n  }\n\n  changeHandler = (event) => {\n    let changed = this.state.newUser;\n    changed[event.target.name] = event.target.value;\n    this.setState({newUser: changed});\n  };\n\n  handleSubmit(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    signUp(this.state.newUser, (resData, jwres) => {\n      if (jwres.statusCode === 400) {\n        return this.showError(resData.message);\n      }\n    });\n  };\n\n  showError(value) {\n    return value === undefined ? this.state.error : this.setState({error: value});\n  }\n\n  render() {\n    return (\n      <div className=\"UserSignUp\">\n        <Row>\n          <Col md={{span: 8}}>\n            {\n              this.state.error ? (\n                <AlertDismissible parentValue={this.showError}>{this.state.error}</AlertDismissible>\n              ) : ''\n            }\n            <Form onSubmit={this.handleSubmit}>\n              <Form.Group controlId=\"formBasicFirstName\">\n                <Form.Label>First Name</Form.Label>\n                <Form.Control\n                  type=\"text\"\n                  name=\"name\"\n                  placeholder=\"Enter First Name\"\n                  onChange={this.changeHandler}\n                  required/>\n              </Form.Group>\n              <Form.Group controlId=\"formBasicEmail\">\n                <Form.Label>Email address</Form.Label>\n                <Form.Control\n                  name=\"email\"\n                  type=\"email\"\n                  placeholder=\"Enter Email\"\n                  onChange={this.changeHandler}\n                  required/>\n              </Form.Group>\n              <Form.Group controlId=\"formBasicPassword\">\n                <Form.Label>Password</Form.Label>\n                <Form.Control\n                  name=\"password\"\n                  type=\"password\"\n                  placeholder=\"Password\"\n                  onChange={this.changeHandler}\n                  required\n                  minLength=\"6\"/>\n              </Form.Group>\n              <Button variant=\"primary\" type=\"submit\">Sign up</Button>\n            </Form>\n          </Col>\n          <Col>\n            <img src={signUpLogo} className=\"SignUp-logo\" alt=\"logo\"/>\n          </Col>\n        </Row>\n      </div>\n    );\n  }\n}\n\nexport default SignUp;\n","import BooksList from './BooksList';\nimport {Button, ButtonToolbar} from 'react-bootstrap';\nimport React from 'react';\nimport JwtRequest from '../services/JwtRequest';\n\nclass MyBooksList extends BooksList {\n  booksUrl() {\n    let skip = (this.state.page - 1) * this.pageSize;\n    return `/api/books?skip=${skip}&limit=${this.pageSize}&where={\"active\":true}`;\n  }\n\n  booksCountUrl() {\n    return '/api/books/count?active=true';\n  }\n\n  addToCart(book) {\n    return () => {\n      JwtRequest.post({\n          url: '/api/carts',\n          data: {bookId: book.id}\n        }, (cart, jwres) => {\n          if (jwres.statusCode === 200 && cart) {\n            this.setState({redirectTo: '/cart'});\n          }\n        }\n      );\n    };\n  }\n\n  actionButtons(book) {\n    return (\n      <ButtonToolbar>\n        <Button variant=\"primary\" onClick={this.addToCart(book)} size=\"sm\">\n          Add to Cart\n        </Button>\n      </ButtonToolbar>\n    );\n  }\n\n  // Don't show the new Button\n  showNewButton() {\n    return '';\n  }\n}\n\nexport default MyBooksList;\n","import OrdersList from './OrdersList';\n\nclass MyOrdersList extends OrdersList{\n  ordersUrl(){\n    let skip = (this.state.page - 1) * this.pageSize;\n    return `/api/orders?skip=${skip}&limit=${this.pageSize}`;\n  }\n\n  ordersCountUrl(){\n    return '/api/orders/count?'\n  }\n\n  // Don't show the new Button\n  showNewButton() {\n    return '';\n  }\n}\n\nexport default MyOrdersList;\n","import React from 'react';\nimport JwtRequest from '../services/JwtRequest';\nimport {Col, Row, Table} from 'react-bootstrap';\n\n\nclass Cart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      books: [],\n      total: 0\n    };\n  }\n\n  componentDidMount() {\n    this.getCart();\n  }\n\n  getCart() {\n    // Get the count\n    JwtRequest.get({url: '/api/carts'}, (books, jwres) => {\n      if (jwres.statusCode === 200 && books) {\n        let total = books.reduce((acc, book) => {\n          return acc + book.price;\n        }, 0);\n        this.setState({\n          books: books,\n          total: total\n        });\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <Row>\n          <Col md=\"2\">\n            <h3>Cart</h3>\n          </Col>\n        </Row>\n        <Table striped size=\"sm\">\n          <thead>\n          <tr>\n            <th>Book</th>\n            <th>Price</th>\n          </tr>\n          </thead>\n          <tbody>\n          {\n            this.state.books.map((book) =>\n              <tr key={book.id}>\n                <td>{book.name}</td>\n                <td>{book.price}</td>\n              </tr>\n            )}\n          </tbody>\n          <thead>\n          <tr>\n            <th>Total</th>\n            <th>{this.state.total}</th>\n          </tr>\n          </thead>\n        </Table>\n      </div>\n    );\n  }\n}\n\nexport default Cart;\n","import React from 'react';\nimport SignIn from '../auth/SignIn';\nimport SignUp from '../auth/SignUp';\nimport BooksList from '../books/BooksList';\nimport UsersList from '../users/UserList';\nimport MyBooksList from '../books/MyBooksList';\nimport OrdersList from '../orders/OrdersList';\nimport MyOrdersList from '../orders/MyOrdersList';\nimport Cart from '../cart/Cart';\n\nconst defaultMenu = {\n  routes: [\n    ['/sign_in', 'Sign In'],\n    ['/sign_up', 'Sign Up'],\n  ],\n  switch: [\n    ['/sign_up', <SignUp/>],\n    ['/sign_in', <SignIn/>]\n  ]\n};\n\nconst menuByUser = {\n  user: {\n    routes: [\n      ['/books', 'Books'],\n      ['/orders', 'My orders'],\n      ['/cart', 'My cart'],\n    ],\n    switch: [\n      ['/books', <MyBooksList/>],\n      ['/orders', <MyOrdersList/>],\n      ['/cart', <Cart/>],\n    ]\n  },\n  admin: {\n    routes: [\n      ['/books', 'Books'],\n      ['/users', 'Users'],\n      ['/orders', 'Orders'],\n    ],\n    switch: [\n      ['/books', <BooksList/>],\n      ['/users', <UsersList/>],\n      ['/orders', <OrdersList/>],\n    ]\n  }\n};\n\nclass Menus {\n  static roleMenu(role) {\n    return role ? menuByUser[role] : defaultMenu;\n  }\n}\n\nexport default Menus;\n","import React from 'react';\nimport {Col, Container, Nav, Navbar, Row} from 'react-bootstrap';\nimport {BrowserRouter as Router, Link, Switch, Route} from 'react-router-dom';\nimport Clock from './components/helpers/Clock';\nimport {logout, me} from './components/services/AuthService';\nimport Menus from './components/helpers/Menus';\n\nfunction Home() {\n  return <h2>Welcome to the Book Store</h2>;\n}\n\nfunction About() {\n  return <h2>About</h2>;\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      user: null\n    };\n\n    this.setUser = this.setUser.bind(this);\n    me(this.setUser);\n  }\n\n  setUser(userData) {\n    this.setState({user: userData});\n  }\n\n  userRole() {\n    return this.state.user && this.state.user.accountType;\n  }\n\n  userMenu() {\n    return Menus.roleMenu(this.userRole());\n  }\n\n  pages() {\n    return this.userMenu().switch.map((page, idx) => <Route path={page[0]} key={page[0]}>{page[1]}</Route>);\n  }\n\n  routeLinks() {\n    return this.userMenu().routes.map((route) => <Nav.Link key={route[0]} as={Link} to={route[0]}>{route[1]}</Nav.Link>);\n  }\n\n  navBar() {\n    return (\n      <Navbar collapseOnSelect expand=\"lg\" bg=\"primary\" variant=\"dark\">\n        <Container>\n          <Navbar.Brand as={Link} to=\"/\">Book Store</Navbar.Brand>\n          <Navbar.Toggle aria-controls=\"responsive-navbar-nav\"/>\n          <Navbar.Collapse id=\"responsive-navbar-nav\">\n            <Nav className=\"mr-auto\">\n              {this.routeLinks()}\n            </Nav>\n\n            <Nav>\n              <Nav.Link as={Link} to=\"/about\">About</Nav.Link>\n              {this.userRole() ? <Nav.Link onClick={logout}>Logout</Nav.Link> : ''}\n              <Navbar.Text><Clock/></Navbar.Text>\n            </Nav>\n          </Navbar.Collapse>\n        </Container>\n      </Navbar>\n    );\n  }\n\n  pageSwitch() {\n    return (\n      <Switch>\n        {this.pages()}\n        <Route path=\"/about\">\n          <About/>\n        </Route>\n        <Route path=\"/\">\n          <Home/>\n        </Route>\n      </Switch>\n    );\n  }\n\n  render() {\n    return (\n      <Router>\n        {this.navBar()}\n        <Container className=\"main\">\n          <Row>\n            <Col>{this.pageSwitch()}</Col>\n          </Row>\n        </Container>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport socketIOClient from 'socket.io-client';\nimport sailsIOClient from 'sails.io.js';\n\nimport './index.scss';\n\nimport App from './App';\n\nlet io = sailsIOClient(socketIOClient);\nio.sails.reconnection = true;\nio.sails.url = window.location.hostname === 'localhost' ? `http://${window.location.hostname}:5000` : window.location.origin;\nwindow.io = io;\n\nReactDOM.render(<App/>, document.getElementById('root'));\n","import React from 'react';\nimport JwtRequest from '../services/JwtRequest';\nimport {Button, Col, Row, Table, Pagination, ButtonToolbar} from 'react-bootstrap';\nimport downloadLogo from '../helpers/downloadLogo.svg';\nimport NewBook from './NewBook';\nimport HardJwtRequest from '../services/HardJwtRequest';\nimport {createBrowserHistory} from 'history';\nimport {me} from '../services/AuthService';\nimport {Redirect} from 'react-router-dom';\n\nclass BooksList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.pageSize = parseInt(this.params('pageSize')) || 5;\n    this.history = createBrowserHistory();\n    let page = parseInt(this.params('page')) || 1;\n    this.state = {\n      showNew: false,\n      page: page,\n      pageCount: 1,\n      books: {},\n      userRole: null,\n      redirectTo: null\n    };\n  }\n\n  userRole = (me) => {\n    this.setState({'userRole': me ? me.accountType : null});\n  };\n\n  componentDidMount() {\n    me(this.userRole);\n    this.toPage(this.state.page);\n  }\n\n  params(param = null) {\n    let params = new URLSearchParams(window.location.search);\n    return param ? params.get(param) : params;\n  }\n\n  booksUrl() {\n    let skip = (this.state.page - 1) * this.pageSize;\n    return `/api/books?skip=${skip}&limit=${this.pageSize}`;\n  }\n\n  booksCountUrl() {\n    return '/api/books/count';\n  }\n\n  getBooks() {\n    if (this.state.page) {\n      // Get the Books\n      JwtRequest.get({url: this.booksUrl()}, (booksRes, jwres) => {\n        if (jwres.statusCode === 200 && booksRes) {\n          let books = {};\n          booksRes.forEach((book) => books[book.id] = book);\n          this.setState({books: books});\n        }\n      });\n\n      // Get the count\n      JwtRequest.get({url: this.booksCountUrl()}, (booksCount, jwres) => {\n        if (jwres.statusCode === 200 && booksCount) {\n          let pageCount = Math.ceil(parseInt(booksCount) / this.pageSize);\n          if (this.state.page > pageCount) {\n            this.toPage(pageCount);\n          } else {\n            this.setState({pageCount: pageCount});\n          }\n\n        }\n      });\n    }\n  }\n\n  toggleActive = (book) => {\n    return () => {\n      JwtRequest.patch({url: `/api/books/${book.id}`, data: {active: !book.active}}, (book, jwres) => {\n        if (jwres.statusCode === 200 && book) {\n          let books = {...this.state.books};\n          books[book.id] = book;\n          this.setState({books: books});\n        }\n      });\n    };\n  };\n\n  showNew = () => {\n    this.setState({showNew: true});\n  };\n\n  hideNew = () => {\n    this.getBooks();\n    this.setState({showNew: false});\n  };\n\n  download(book) {\n    return () => {\n      HardJwtRequest.download({url: `/api/books/${book.id}/download`, filename: book.name});\n    };\n  }\n\n  toPage(page) {\n    this.setState({page: page});\n    setImmediate(() => this.getBooks());\n    this.history.push({\n      pathname: '/books',\n      search: '?' + new URLSearchParams({page: page}).toString()\n    });\n  }\n\n  pagination() {\n    let base = Math.max(this.state.page - 2, 1);\n    let max = Math.min(base + 5, this.state.pageCount);\n    let items = [];\n    for (let number = base; number <= max; number++) {\n      items.push(\n        <Pagination.Item onClick={() => this.toPage(number)} key={number} active={number === this.state.page}>\n          {number}\n        </Pagination.Item>,\n      );\n    }\n    return (\n      <Pagination>{items}</Pagination>\n    );\n  }\n\n  actionButtons(book) {\n    return (\n      <ButtonToolbar>\n        <Button variant=\"link\" onClick={this.download(book)}>\n          <img src={downloadLogo} style={{width: 20, height: 20}} className=\"Download-logo\" alt=\"logo\"/>\n        </Button>\n        <Button variant={book.active ? 'success' : 'secondary'} onClick={this.toggleActive(book)}\n                size=\"sm\">\n          {book.active ? 'Active' : 'Inactive'}\n        </Button>\n      </ButtonToolbar>\n    );\n  }\n\n  showNewButton() {\n    return (\n      <Col>\n        <Button variant=\"primary\" onClick={this.showNew}> New </Button>\n      </Col>\n    );\n  }\n\n  render() {\n    if(this.state.redirectTo){\n      return <Redirect to={this.state.redirectTo} />\n    }\n    return (\n      <div>\n        <NewBook showNew={this.state.showNew} hideNew={this.hideNew}/>\n        <Row>\n          <Col md=\"2\">\n            <h3>Books</h3>\n          </Col>\n          {this.showNewButton()}\n        </Row>\n\n        <Table striped size=\"sm\">\n          <thead>\n          <tr>\n            <th>Name</th>\n            <th>Author</th>\n            <th>Price</th>\n            <th>Keywords</th>\n            <th>Actions</th>\n          </tr>\n          </thead>\n          <tbody>\n\n          {Object.keys(this.state.books).map((id, i) => {\n            let book = this.state.books[id];\n            return (\n              <tr key={id}>\n                <td>{book.name}</td>\n                <td>{book.author}</td>\n                <td>{book.price}</td>\n                <td>{book.keywords && book.keywords.join(', ')}</td>\n                <td>{this.actionButtons(book)}</td>\n              </tr>\n            );\n          })}\n          </tbody>\n        </Table>\n        <Row><Col>{this.pagination()}</Col></Row>\n      </div>\n    );\n  }\n}\n\nexport default BooksList;\n","import _ from 'lodash';\nimport axios from 'axios';\nimport JwtRequest from './JwtRequest';\n\n\nclass HardJwtRequest {\n  static get(opts, cb) {\n    return HardJwtRequest.request(_.merge({}, opts, {method: 'GET'}), cb);\n  }\n\n  static post(opts, cb) {\n    return HardJwtRequest.request(_.merge({}, opts, {method: 'POST'}), cb);\n  }\n\n  static patch(opts, cb) {\n    return HardJwtRequest.request(_.merge({}, opts, {method: 'PATCH'}), cb);\n  }\n\n  static download(opts) {\n    let filename;\n    if(opts.filename){\n      filename = opts.filename;\n      delete opts.filename\n    }\n    return HardJwtRequest.request(_.merge({}, opts, {method: 'GET', responseType: 'blob'}))\n    .then((response) => {\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', `${filename || 'book'}.txt`);\n      document.body.appendChild(link);\n      link.click();\n      setTimeout(() => document.body.removeChild(link), 1000);\n    });\n  }\n\n  static request(opts, cb) {\n    opts = _.merge(opts, {\n      headers: {authorization: `Bearer ${JwtRequest.jwt}`}\n    });\n\n    // eslint-disable-next-line no-undef\n    opts['url'] = `${io.sails.url}${opts['url']}`;\n    return axios.request(opts, (resData, jwres) => {\n      if (jwres.statusCode === 200 && resData.token) {\n        localStorage.setItem('jwt', JwtRequest.jwt = resData.token);\n      }\n      cb(resData, jwres);\n    });\n  }\n\n}\n\nexport default HardJwtRequest;\n","import {Table} from 'react-bootstrap';\nimport React from 'react';\n\n/**\n * @return {string}\n */\nfunction OrdersTable(props) {\n  return !props.orders ? '' : (\n    <Table striped size=\"sm\">\n      <thead>\n      <tr>\n        <th>Order ID</th>\n        <th>Date</th>\n        <th>User Email</th>\n        <th>Books</th>\n      </tr>\n      </thead>\n      <tbody>\n      {Object.keys(props.orders).map((id) => {\n        let order = props.orders[id];\n        return (\n          <tr key={id}>\n            <td>{id}</td>\n            <td>{(new Date(order.createdAt)).toLocaleDateString()}</td>\n            <td>{order.owner.email}</td>\n            <td>{\n              order.books.map(book=>\n                <div key={book.id}>- {book.name}</div>\n              )\n            }</td>\n          </tr>\n        );\n      })}\n      </tbody>\n    </Table>\n  )\n}\n\nexport default OrdersTable;\n","import React from 'react';\nimport JwtRequest from '../services/JwtRequest';\nimport {Col, Row, Pagination} from 'react-bootstrap';\nimport {createBrowserHistory} from 'history';\nimport {me} from '../services/AuthService';\nimport OrdersTable from './OrdersTable';\n\nclass OrdersList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.pageSize = parseInt(this.params('pageSize')) || 5;\n    this.history = createBrowserHistory();\n    let page = parseInt(this.params('page')) || 1;\n    this.state = {\n      page: page,\n      pageCount: 1,\n      orders: {},\n      userRole: null\n    };\n  }\n\n  userRole = (me) => {\n    this.setState({'userRole': me ? me.accountType : null});\n  };\n\n  componentDidMount() {\n    me(this.userRole);\n    this.toPage(this.state.page);\n  }\n\n  params(param = null) {\n    let params = new URLSearchParams(window.location.search);\n    return param ? params.get(param) : params;\n  }\n\n  ordersUrl(){\n    let skip = (this.state.page - 1) * this.pageSize;\n    return `/api/orders?skip=${skip}&limit=${this.pageSize}`;\n  }\n\n  ordersCountUrl(){\n    return '/api/orders/count'\n  }\n\n  getOrders() {\n    if (this.state.page) {\n\n      // Get the orders\n      JwtRequest.get({url: this.ordersUrl()}, (ordersRes, jwres) => {\n        if (jwres.statusCode === 200 && ordersRes) {\n          let orders = {};\n          ordersRes.forEach((user) => orders[user.id] = user);\n          this.setState({orders: orders});\n        }\n      });\n\n      // Get the count\n      JwtRequest.get({url: this.ordersCountUrl()}, (ordersCount, jwres) => {\n        if (jwres.statusCode === 200 && ordersCount) {\n          let pageCount = Math.ceil(parseInt(ordersCount) / this.pageSize);\n          if (this.state.page > pageCount) {\n            this.toPage(pageCount);\n          } else {\n            this.setState({pageCount: pageCount});\n          }\n\n        }\n      });\n    }\n  }\n\n  toPage(page) {\n    this.setState({page: page});\n    setImmediate(() => this.getOrders());\n    this.history.push({\n      pathname: '/orders',\n      search: '?' + new URLSearchParams({page: page}).toString()\n    });\n  }\n\n  pagination() {\n    let base = Math.max(this.state.page - 2, 1);\n    let max = Math.min(base + 5, this.state.pageCount);\n    let items = [];\n    for (let number = base; number <= max; number++) {\n      items.push(\n        <Pagination.Item onClick={() => this.toPage(number)} key={number} active={number === this.state.page}>\n          {number}\n        </Pagination.Item>,\n      );\n    }\n    return (\n      <Pagination>{items}</Pagination>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        <Row>\n          <Col md=\"2\">\n            <h3>Orders</h3>\n          </Col>\n        </Row>\n        <OrdersTable orders={this.state.orders}/>\n        <Row><Col>{this.pagination()}</Col></Row>\n      </div>\n    );\n  }\n}\n\nexport default OrdersList;\n"],"sourceRoot":""}